80624a5ba2d460985e4fd390a816761e
var Tokenizer = require("./Tokenizer.js");
/*
	Options:

	xmlMode: Disables the special behavior for script/style tags (false by default)
	lowerCaseAttributeNames: call .toLowerCase for each attribute name (true if xmlMode is `false`)
	lowerCaseTags: call .toLowerCase for each tag name (true if xmlMode is `false`)
*/

/*
	Callbacks:

	oncdataend,
	oncdatastart,
	onclosetag,
	oncomment,
	oncommentend,
	onerror,
	onopentag,
	onprocessinginstruction,
	onreset,
	ontext
*/


var formTags = {
  input: true,
  option: true,
  optgroup: true,
  select: true,
  button: true,
  datalist: true,
  textarea: true
};
var openImpliesClose = {
  tr: {
    tr: true,
    th: true,
    td: true
  },
  th: {
    th: true
  },
  td: {
    thead: true,
    th: true,
    td: true
  },
  body: {
    head: true,
    link: true,
    script: true
  },
  li: {
    li: true
  },
  p: {
    p: true
  },
  h1: {
    p: true
  },
  h2: {
    p: true
  },
  h3: {
    p: true
  },
  h4: {
    p: true
  },
  h5: {
    p: true
  },
  h6: {
    p: true
  },
  select: formTags,
  input: formTags,
  output: formTags,
  button: formTags,
  datalist: formTags,
  textarea: formTags,
  option: {
    option: true
  },
  optgroup: {
    optgroup: true
  }
};
var voidElements = {
  __proto__: null,
  area: true,
  base: true,
  basefont: true,
  br: true,
  col: true,
  command: true,
  embed: true,
  frame: true,
  hr: true,
  img: true,
  input: true,
  isindex: true,
  keygen: true,
  link: true,
  meta: true,
  param: true,
  source: true,
  track: true,
  wbr: true
};
var foreignContextElements = {
  __proto__: null,
  math: true,
  svg: true
};
var htmlIntegrationElements = {
  __proto__: null,
  mi: true,
  mo: true,
  mn: true,
  ms: true,
  mtext: true,
  "annotation-xml": true,
  foreignObject: true,
  desc: true,
  title: true
};
var re_nameEnd = /\s|\//;

function Parser(cbs, options) {
  this._options = options || {};
  this._cbs = cbs || {};
  this._tagname = "";
  this._attribname = "";
  this._attribvalue = "";
  this._attribs = null;
  this._stack = [];
  this._foreignContext = [];
  this.startIndex = 0;
  this.endIndex = null;
  this._lowerCaseTagNames = "lowerCaseTags" in this._options ? !!this._options.lowerCaseTags : !this._options.xmlMode;
  this._lowerCaseAttributeNames = "lowerCaseAttributeNames" in this._options ? !!this._options.lowerCaseAttributeNames : !this._options.xmlMode;

  if (this._options.Tokenizer) {
    Tokenizer = this._options.Tokenizer;
  }

  this._tokenizer = new Tokenizer(this._options, this);
  if (this._cbs.onparserinit) this._cbs.onparserinit(this);
}

require("inherits")(Parser, require("events").EventEmitter);

Parser.prototype._updatePosition = function (initialOffset) {
  if (this.endIndex === null) {
    if (this._tokenizer._sectionStart <= initialOffset) {
      this.startIndex = 0;
    } else {
      this.startIndex = this._tokenizer._sectionStart - initialOffset;
    }
  } else this.startIndex = this.endIndex + 1;

  this.endIndex = this._tokenizer.getAbsoluteIndex();
}; //Tokenizer event handlers


Parser.prototype.ontext = function (data) {
  this._updatePosition(1);

  this.endIndex--;
  if (this._cbs.ontext) this._cbs.ontext(data);
};

Parser.prototype.onopentagname = function (name) {
  if (this._lowerCaseTagNames) {
    name = name.toLowerCase();
  }

  this._tagname = name;

  if (!this._options.xmlMode && name in openImpliesClose) {
    for (var el; ((el = this._stack[this._stack.length - 1]) in openImpliesClose[name]); this.onclosetag(el));
  }

  if (this._options.xmlMode || !(name in voidElements)) {
    this._stack.push(name);

    if (name in foreignContextElements) this._foreignContext.push(true);else if (name in htmlIntegrationElements) this._foreignContext.push(false);
  }

  if (this._cbs.onopentagname) this._cbs.onopentagname(name);
  if (this._cbs.onopentag) this._attribs = {};
};

Parser.prototype.onopentagend = function () {
  this._updatePosition(1);

  if (this._attribs) {
    if (this._cbs.onopentag) this._cbs.onopentag(this._tagname, this._attribs);
    this._attribs = null;
  }

  if (!this._options.xmlMode && this._cbs.onclosetag && this._tagname in voidElements) {
    this._cbs.onclosetag(this._tagname);
  }

  this._tagname = "";
};

Parser.prototype.onclosetag = function (name) {
  this._updatePosition(1);

  if (this._lowerCaseTagNames) {
    name = name.toLowerCase();
  }

  if (name in foreignContextElements || name in htmlIntegrationElements) {
    this._foreignContext.pop();
  }

  if (this._stack.length && (!(name in voidElements) || this._options.xmlMode)) {
    var pos = this._stack.lastIndexOf(name);

    if (pos !== -1) {
      if (this._cbs.onclosetag) {
        pos = this._stack.length - pos;

        while (pos--) this._cbs.onclosetag(this._stack.pop());
      } else this._stack.length = pos;
    } else if (name === "p" && !this._options.xmlMode) {
      this.onopentagname(name);

      this._closeCurrentTag();
    }
  } else if (!this._options.xmlMode && (name === "br" || name === "p")) {
    this.onopentagname(name);

    this._closeCurrentTag();
  }
};

Parser.prototype.onselfclosingtag = function () {
  if (this._options.xmlMode || this._options.recognizeSelfClosing || this._foreignContext[this._foreignContext.length - 1]) {
    this._closeCurrentTag();
  } else {
    this.onopentagend();
  }
};

Parser.prototype._closeCurrentTag = function () {
  var name = this._tagname;
  this.onopentagend(); //self-closing tags will be on the top of the stack
  //(cheaper check than in onclosetag)

  if (this._stack[this._stack.length - 1] === name) {
    if (this._cbs.onclosetag) {
      this._cbs.onclosetag(name);
    }

    this._stack.pop();
  }
};

Parser.prototype.onattribname = function (name) {
  if (this._lowerCaseAttributeNames) {
    name = name.toLowerCase();
  }

  this._attribname = name;
};

Parser.prototype.onattribdata = function (value) {
  this._attribvalue += value;
};

Parser.prototype.onattribend = function () {
  if (this._cbs.onattribute) this._cbs.onattribute(this._attribname, this._attribvalue);

  if (this._attribs && !Object.prototype.hasOwnProperty.call(this._attribs, this._attribname)) {
    this._attribs[this._attribname] = this._attribvalue;
  }

  this._attribname = "";
  this._attribvalue = "";
};

Parser.prototype._getInstructionName = function (value) {
  var idx = value.search(re_nameEnd),
      name = idx < 0 ? value : value.substr(0, idx);

  if (this._lowerCaseTagNames) {
    name = name.toLowerCase();
  }

  return name;
};

Parser.prototype.ondeclaration = function (value) {
  if (this._cbs.onprocessinginstruction) {
    var name = this._getInstructionName(value);

    this._cbs.onprocessinginstruction("!" + name, "!" + value);
  }
};

Parser.prototype.onprocessinginstruction = function (value) {
  if (this._cbs.onprocessinginstruction) {
    var name = this._getInstructionName(value);

    this._cbs.onprocessinginstruction("?" + name, "?" + value);
  }
};

Parser.prototype.oncomment = function (value) {
  this._updatePosition(4);

  if (this._cbs.oncomment) this._cbs.oncomment(value);
  if (this._cbs.oncommentend) this._cbs.oncommentend();
};

Parser.prototype.oncdata = function (value) {
  this._updatePosition(1);

  if (this._options.xmlMode || this._options.recognizeCDATA) {
    if (this._cbs.oncdatastart) this._cbs.oncdatastart();
    if (this._cbs.ontext) this._cbs.ontext(value);
    if (this._cbs.oncdataend) this._cbs.oncdataend();
  } else {
    this.oncomment("[CDATA[" + value + "]]");
  }
};

Parser.prototype.onerror = function (err) {
  if (this._cbs.onerror) this._cbs.onerror(err);
};

Parser.prototype.onend = function () {
  if (this._cbs.onclosetag) {
    for (var i = this._stack.length; i > 0; this._cbs.onclosetag(this._stack[--i]));
  }

  if (this._cbs.onend) this._cbs.onend();
}; //Resets the parser to a blank state, ready to parse a new HTML document


Parser.prototype.reset = function () {
  if (this._cbs.onreset) this._cbs.onreset();

  this._tokenizer.reset();

  this._tagname = "";
  this._attribname = "";
  this._attribs = null;
  this._stack = [];
  if (this._cbs.onparserinit) this._cbs.onparserinit(this);
}; //Parses a complete HTML document and pushes it to the handler


Parser.prototype.parseComplete = function (data) {
  this.reset();
  this.end(data);
};

Parser.prototype.write = function (chunk) {
  this._tokenizer.write(chunk);
};

Parser.prototype.end = function (chunk) {
  this._tokenizer.end(chunk);
};

Parser.prototype.pause = function () {
  this._tokenizer.pause();
};

Parser.prototype.resume = function () {
  this._tokenizer.resume();
}; //alias for backwards compat


Parser.prototype.parseChunk = Parser.prototype.write;
Parser.prototype.done = Parser.prototype.end;
module.exports = Parser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBhcnNlci5qcyJdLCJuYW1lcyI6WyJUb2tlbml6ZXIiLCJyZXF1aXJlIiwiZm9ybVRhZ3MiLCJpbnB1dCIsIm9wdGlvbiIsIm9wdGdyb3VwIiwic2VsZWN0IiwiYnV0dG9uIiwiZGF0YWxpc3QiLCJ0ZXh0YXJlYSIsIm9wZW5JbXBsaWVzQ2xvc2UiLCJ0ciIsInRoIiwidGQiLCJ0aGVhZCIsImJvZHkiLCJoZWFkIiwibGluayIsInNjcmlwdCIsImxpIiwicCIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsIm91dHB1dCIsInZvaWRFbGVtZW50cyIsIl9fcHJvdG9fXyIsImFyZWEiLCJiYXNlIiwiYmFzZWZvbnQiLCJiciIsImNvbCIsImNvbW1hbmQiLCJlbWJlZCIsImZyYW1lIiwiaHIiLCJpbWciLCJpc2luZGV4Iiwia2V5Z2VuIiwibWV0YSIsInBhcmFtIiwic291cmNlIiwidHJhY2siLCJ3YnIiLCJmb3JlaWduQ29udGV4dEVsZW1lbnRzIiwibWF0aCIsInN2ZyIsImh0bWxJbnRlZ3JhdGlvbkVsZW1lbnRzIiwibWkiLCJtbyIsIm1uIiwibXMiLCJtdGV4dCIsImZvcmVpZ25PYmplY3QiLCJkZXNjIiwidGl0bGUiLCJyZV9uYW1lRW5kIiwiUGFyc2VyIiwiY2JzIiwib3B0aW9ucyIsIl9vcHRpb25zIiwiX2NicyIsIl90YWduYW1lIiwiX2F0dHJpYm5hbWUiLCJfYXR0cmlidmFsdWUiLCJfYXR0cmlicyIsIl9zdGFjayIsIl9mb3JlaWduQ29udGV4dCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsIl9sb3dlckNhc2VUYWdOYW1lcyIsImxvd2VyQ2FzZVRhZ3MiLCJ4bWxNb2RlIiwiX2xvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzIiwibG93ZXJDYXNlQXR0cmlidXRlTmFtZXMiLCJfdG9rZW5pemVyIiwib25wYXJzZXJpbml0IiwiRXZlbnRFbWl0dGVyIiwicHJvdG90eXBlIiwiX3VwZGF0ZVBvc2l0aW9uIiwiaW5pdGlhbE9mZnNldCIsIl9zZWN0aW9uU3RhcnQiLCJnZXRBYnNvbHV0ZUluZGV4Iiwib250ZXh0IiwiZGF0YSIsIm9ub3BlbnRhZ25hbWUiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJlbCIsImxlbmd0aCIsIm9uY2xvc2V0YWciLCJwdXNoIiwib25vcGVudGFnIiwib25vcGVudGFnZW5kIiwicG9wIiwicG9zIiwibGFzdEluZGV4T2YiLCJfY2xvc2VDdXJyZW50VGFnIiwib25zZWxmY2xvc2luZ3RhZyIsInJlY29nbml6ZVNlbGZDbG9zaW5nIiwib25hdHRyaWJuYW1lIiwib25hdHRyaWJkYXRhIiwidmFsdWUiLCJvbmF0dHJpYmVuZCIsIm9uYXR0cmlidXRlIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX2dldEluc3RydWN0aW9uTmFtZSIsImlkeCIsInNlYXJjaCIsInN1YnN0ciIsIm9uZGVjbGFyYXRpb24iLCJvbnByb2Nlc3NpbmdpbnN0cnVjdGlvbiIsIm9uY29tbWVudCIsIm9uY29tbWVudGVuZCIsIm9uY2RhdGEiLCJyZWNvZ25pemVDREFUQSIsIm9uY2RhdGFzdGFydCIsIm9uY2RhdGFlbmQiLCJvbmVycm9yIiwiZXJyIiwib25lbmQiLCJpIiwicmVzZXQiLCJvbnJlc2V0IiwicGFyc2VDb21wbGV0ZSIsImVuZCIsIndyaXRlIiwiY2h1bmsiLCJwYXVzZSIsInJlc3VtZSIsInBhcnNlQ2h1bmsiLCJkb25lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsU0FBUyxHQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBdkI7QUFFQTs7Ozs7Ozs7QUFRQTs7Ozs7Ozs7Ozs7Ozs7OztBQWVBLElBQUlDLFFBQVEsR0FBRztBQUNYQyxFQUFBQSxLQUFLLEVBQUUsSUFESTtBQUVYQyxFQUFBQSxNQUFNLEVBQUUsSUFGRztBQUdYQyxFQUFBQSxRQUFRLEVBQUUsSUFIQztBQUlYQyxFQUFBQSxNQUFNLEVBQUUsSUFKRztBQUtYQyxFQUFBQSxNQUFNLEVBQUUsSUFMRztBQU1YQyxFQUFBQSxRQUFRLEVBQUUsSUFOQztBQU9YQyxFQUFBQSxRQUFRLEVBQUU7QUFQQyxDQUFmO0FBVUEsSUFBSUMsZ0JBQWdCLEdBQUc7QUFDbkJDLEVBQUFBLEVBQUUsRUFBRTtBQUFFQSxJQUFBQSxFQUFFLEVBQUUsSUFBTjtBQUFZQyxJQUFBQSxFQUFFLEVBQUUsSUFBaEI7QUFBc0JDLElBQUFBLEVBQUUsRUFBRTtBQUExQixHQURlO0FBRW5CRCxFQUFBQSxFQUFFLEVBQUU7QUFBRUEsSUFBQUEsRUFBRSxFQUFFO0FBQU4sR0FGZTtBQUduQkMsRUFBQUEsRUFBRSxFQUFFO0FBQUVDLElBQUFBLEtBQUssRUFBRSxJQUFUO0FBQWVGLElBQUFBLEVBQUUsRUFBRSxJQUFuQjtBQUF5QkMsSUFBQUEsRUFBRSxFQUFFO0FBQTdCLEdBSGU7QUFJbkJFLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUUsSUFBUjtBQUFjQyxJQUFBQSxJQUFJLEVBQUUsSUFBcEI7QUFBMEJDLElBQUFBLE1BQU0sRUFBRTtBQUFsQyxHQUphO0FBS25CQyxFQUFBQSxFQUFFLEVBQUU7QUFBRUEsSUFBQUEsRUFBRSxFQUFFO0FBQU4sR0FMZTtBQU1uQkMsRUFBQUEsQ0FBQyxFQUFFO0FBQUVBLElBQUFBLENBQUMsRUFBRTtBQUFMLEdBTmdCO0FBT25CQyxFQUFBQSxFQUFFLEVBQUU7QUFBRUQsSUFBQUEsQ0FBQyxFQUFFO0FBQUwsR0FQZTtBQVFuQkUsRUFBQUEsRUFBRSxFQUFFO0FBQUVGLElBQUFBLENBQUMsRUFBRTtBQUFMLEdBUmU7QUFTbkJHLEVBQUFBLEVBQUUsRUFBRTtBQUFFSCxJQUFBQSxDQUFDLEVBQUU7QUFBTCxHQVRlO0FBVW5CSSxFQUFBQSxFQUFFLEVBQUU7QUFBRUosSUFBQUEsQ0FBQyxFQUFFO0FBQUwsR0FWZTtBQVduQkssRUFBQUEsRUFBRSxFQUFFO0FBQUVMLElBQUFBLENBQUMsRUFBRTtBQUFMLEdBWGU7QUFZbkJNLEVBQUFBLEVBQUUsRUFBRTtBQUFFTixJQUFBQSxDQUFDLEVBQUU7QUFBTCxHQVplO0FBYW5CZCxFQUFBQSxNQUFNLEVBQUVKLFFBYlc7QUFjbkJDLEVBQUFBLEtBQUssRUFBRUQsUUFkWTtBQWVuQnlCLEVBQUFBLE1BQU0sRUFBRXpCLFFBZlc7QUFnQm5CSyxFQUFBQSxNQUFNLEVBQUVMLFFBaEJXO0FBaUJuQk0sRUFBQUEsUUFBUSxFQUFFTixRQWpCUztBQWtCbkJPLEVBQUFBLFFBQVEsRUFBRVAsUUFsQlM7QUFtQm5CRSxFQUFBQSxNQUFNLEVBQUU7QUFBRUEsSUFBQUEsTUFBTSxFQUFFO0FBQVYsR0FuQlc7QUFvQm5CQyxFQUFBQSxRQUFRLEVBQUU7QUFBRUEsSUFBQUEsUUFBUSxFQUFFO0FBQVo7QUFwQlMsQ0FBdkI7QUF1QkEsSUFBSXVCLFlBQVksR0FBRztBQUNmQyxFQUFBQSxTQUFTLEVBQUUsSUFESTtBQUVmQyxFQUFBQSxJQUFJLEVBQUUsSUFGUztBQUdmQyxFQUFBQSxJQUFJLEVBQUUsSUFIUztBQUlmQyxFQUFBQSxRQUFRLEVBQUUsSUFKSztBQUtmQyxFQUFBQSxFQUFFLEVBQUUsSUFMVztBQU1mQyxFQUFBQSxHQUFHLEVBQUUsSUFOVTtBQU9mQyxFQUFBQSxPQUFPLEVBQUUsSUFQTTtBQVFmQyxFQUFBQSxLQUFLLEVBQUUsSUFSUTtBQVNmQyxFQUFBQSxLQUFLLEVBQUUsSUFUUTtBQVVmQyxFQUFBQSxFQUFFLEVBQUUsSUFWVztBQVdmQyxFQUFBQSxHQUFHLEVBQUUsSUFYVTtBQVlmcEMsRUFBQUEsS0FBSyxFQUFFLElBWlE7QUFhZnFDLEVBQUFBLE9BQU8sRUFBRSxJQWJNO0FBY2ZDLEVBQUFBLE1BQU0sRUFBRSxJQWRPO0FBZWZ4QixFQUFBQSxJQUFJLEVBQUUsSUFmUztBQWdCZnlCLEVBQUFBLElBQUksRUFBRSxJQWhCUztBQWlCZkMsRUFBQUEsS0FBSyxFQUFFLElBakJRO0FBa0JmQyxFQUFBQSxNQUFNLEVBQUUsSUFsQk87QUFtQmZDLEVBQUFBLEtBQUssRUFBRSxJQW5CUTtBQW9CZkMsRUFBQUEsR0FBRyxFQUFFO0FBcEJVLENBQW5CO0FBdUJBLElBQUlDLHNCQUFzQixHQUFHO0FBQ3pCbEIsRUFBQUEsU0FBUyxFQUFFLElBRGM7QUFFekJtQixFQUFBQSxJQUFJLEVBQUUsSUFGbUI7QUFHekJDLEVBQUFBLEdBQUcsRUFBRTtBQUhvQixDQUE3QjtBQUtBLElBQUlDLHVCQUF1QixHQUFHO0FBQzFCckIsRUFBQUEsU0FBUyxFQUFFLElBRGU7QUFFMUJzQixFQUFBQSxFQUFFLEVBQUUsSUFGc0I7QUFHMUJDLEVBQUFBLEVBQUUsRUFBRSxJQUhzQjtBQUkxQkMsRUFBQUEsRUFBRSxFQUFFLElBSnNCO0FBSzFCQyxFQUFBQSxFQUFFLEVBQUUsSUFMc0I7QUFNMUJDLEVBQUFBLEtBQUssRUFBRSxJQU5tQjtBQU8xQixvQkFBa0IsSUFQUTtBQVExQkMsRUFBQUEsYUFBYSxFQUFFLElBUlc7QUFTMUJDLEVBQUFBLElBQUksRUFBRSxJQVRvQjtBQVUxQkMsRUFBQUEsS0FBSyxFQUFFO0FBVm1CLENBQTlCO0FBYUEsSUFBSUMsVUFBVSxHQUFHLE9BQWpCOztBQUVBLFNBQVNDLE1BQVQsQ0FBZ0JDLEdBQWhCLEVBQXFCQyxPQUFyQixFQUE4QjtBQUMxQixPQUFLQyxRQUFMLEdBQWdCRCxPQUFPLElBQUksRUFBM0I7QUFDQSxPQUFLRSxJQUFMLEdBQVlILEdBQUcsSUFBSSxFQUFuQjtBQUVBLE9BQUtJLFFBQUwsR0FBZ0IsRUFBaEI7QUFDQSxPQUFLQyxXQUFMLEdBQW1CLEVBQW5CO0FBQ0EsT0FBS0MsWUFBTCxHQUFvQixFQUFwQjtBQUNBLE9BQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxPQUFLQyxNQUFMLEdBQWMsRUFBZDtBQUNBLE9BQUtDLGVBQUwsR0FBdUIsRUFBdkI7QUFFQSxPQUFLQyxVQUFMLEdBQWtCLENBQWxCO0FBQ0EsT0FBS0MsUUFBTCxHQUFnQixJQUFoQjtBQUVBLE9BQUtDLGtCQUFMLEdBQ0ksbUJBQW1CLEtBQUtWLFFBQXhCLEdBQ00sQ0FBQyxDQUFDLEtBQUtBLFFBQUwsQ0FBY1csYUFEdEIsR0FFTSxDQUFDLEtBQUtYLFFBQUwsQ0FBY1ksT0FIekI7QUFJQSxPQUFLQyx3QkFBTCxHQUNJLDZCQUE2QixLQUFLYixRQUFsQyxHQUNNLENBQUMsQ0FBQyxLQUFLQSxRQUFMLENBQWNjLHVCQUR0QixHQUVNLENBQUMsS0FBS2QsUUFBTCxDQUFjWSxPQUh6Qjs7QUFLQSxNQUFJLEtBQUtaLFFBQUwsQ0FBYy9ELFNBQWxCLEVBQTZCO0FBQ3pCQSxJQUFBQSxTQUFTLEdBQUcsS0FBSytELFFBQUwsQ0FBYy9ELFNBQTFCO0FBQ0g7O0FBQ0QsT0FBSzhFLFVBQUwsR0FBa0IsSUFBSTlFLFNBQUosQ0FBYyxLQUFLK0QsUUFBbkIsRUFBNkIsSUFBN0IsQ0FBbEI7QUFFQSxNQUFJLEtBQUtDLElBQUwsQ0FBVWUsWUFBZCxFQUE0QixLQUFLZixJQUFMLENBQVVlLFlBQVYsQ0FBdUIsSUFBdkI7QUFDL0I7O0FBRUQ5RSxPQUFPLENBQUMsVUFBRCxDQUFQLENBQW9CMkQsTUFBcEIsRUFBNEIzRCxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCK0UsWUFBOUM7O0FBRUFwQixNQUFNLENBQUNxQixTQUFQLENBQWlCQyxlQUFqQixHQUFtQyxVQUFTQyxhQUFULEVBQXdCO0FBQ3ZELE1BQUksS0FBS1gsUUFBTCxLQUFrQixJQUF0QixFQUE0QjtBQUN4QixRQUFJLEtBQUtNLFVBQUwsQ0FBZ0JNLGFBQWhCLElBQWlDRCxhQUFyQyxFQUFvRDtBQUNoRCxXQUFLWixVQUFMLEdBQWtCLENBQWxCO0FBQ0gsS0FGRCxNQUVPO0FBQ0gsV0FBS0EsVUFBTCxHQUFrQixLQUFLTyxVQUFMLENBQWdCTSxhQUFoQixHQUFnQ0QsYUFBbEQ7QUFDSDtBQUNKLEdBTkQsTUFNTyxLQUFLWixVQUFMLEdBQWtCLEtBQUtDLFFBQUwsR0FBZ0IsQ0FBbEM7O0FBQ1AsT0FBS0EsUUFBTCxHQUFnQixLQUFLTSxVQUFMLENBQWdCTyxnQkFBaEIsRUFBaEI7QUFDSCxDQVRELEMsQ0FXQTs7O0FBQ0F6QixNQUFNLENBQUNxQixTQUFQLENBQWlCSyxNQUFqQixHQUEwQixVQUFTQyxJQUFULEVBQWU7QUFDckMsT0FBS0wsZUFBTCxDQUFxQixDQUFyQjs7QUFDQSxPQUFLVixRQUFMO0FBRUEsTUFBSSxLQUFLUixJQUFMLENBQVVzQixNQUFkLEVBQXNCLEtBQUt0QixJQUFMLENBQVVzQixNQUFWLENBQWlCQyxJQUFqQjtBQUN6QixDQUxEOztBQU9BM0IsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQk8sYUFBakIsR0FBaUMsVUFBU0MsSUFBVCxFQUFlO0FBQzVDLE1BQUksS0FBS2hCLGtCQUFULEVBQTZCO0FBQ3pCZ0IsSUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNDLFdBQUwsRUFBUDtBQUNIOztBQUVELE9BQUt6QixRQUFMLEdBQWdCd0IsSUFBaEI7O0FBRUEsTUFBSSxDQUFDLEtBQUsxQixRQUFMLENBQWNZLE9BQWYsSUFBMEJjLElBQUksSUFBSS9FLGdCQUF0QyxFQUF3RDtBQUNwRCxTQUNJLElBQUlpRixFQURSLEdBRUksQ0FBQ0EsRUFBRSxHQUFHLEtBQUt0QixNQUFMLENBQVksS0FBS0EsTUFBTCxDQUFZdUIsTUFBWixHQUFxQixDQUFqQyxDQUFOLEtBQ0FsRixnQkFBZ0IsQ0FBQytFLElBQUQsQ0FIcEIsR0FJSSxLQUFLSSxVQUFMLENBQWdCRixFQUFoQixDQUpKLENBS0M7QUFDSjs7QUFFRCxNQUFJLEtBQUs1QixRQUFMLENBQWNZLE9BQWQsSUFBeUIsRUFBRWMsSUFBSSxJQUFJN0QsWUFBVixDQUE3QixFQUFzRDtBQUNsRCxTQUFLeUMsTUFBTCxDQUFZeUIsSUFBWixDQUFpQkwsSUFBakI7O0FBQ0EsUUFBSUEsSUFBSSxJQUFJMUMsc0JBQVosRUFBb0MsS0FBS3VCLGVBQUwsQ0FBcUJ3QixJQUFyQixDQUEwQixJQUExQixFQUFwQyxLQUNLLElBQUlMLElBQUksSUFBSXZDLHVCQUFaLEVBQ0QsS0FBS29CLGVBQUwsQ0FBcUJ3QixJQUFyQixDQUEwQixLQUExQjtBQUNQOztBQUVELE1BQUksS0FBSzlCLElBQUwsQ0FBVXdCLGFBQWQsRUFBNkIsS0FBS3hCLElBQUwsQ0FBVXdCLGFBQVYsQ0FBd0JDLElBQXhCO0FBQzdCLE1BQUksS0FBS3pCLElBQUwsQ0FBVStCLFNBQWQsRUFBeUIsS0FBSzNCLFFBQUwsR0FBZ0IsRUFBaEI7QUFDNUIsQ0F6QkQ7O0FBMkJBUixNQUFNLENBQUNxQixTQUFQLENBQWlCZSxZQUFqQixHQUFnQyxZQUFXO0FBQ3ZDLE9BQUtkLGVBQUwsQ0FBcUIsQ0FBckI7O0FBRUEsTUFBSSxLQUFLZCxRQUFULEVBQW1CO0FBQ2YsUUFBSSxLQUFLSixJQUFMLENBQVUrQixTQUFkLEVBQ0ksS0FBSy9CLElBQUwsQ0FBVStCLFNBQVYsQ0FBb0IsS0FBSzlCLFFBQXpCLEVBQW1DLEtBQUtHLFFBQXhDO0FBQ0osU0FBS0EsUUFBTCxHQUFnQixJQUFoQjtBQUNIOztBQUVELE1BQ0ksQ0FBQyxLQUFLTCxRQUFMLENBQWNZLE9BQWYsSUFDQSxLQUFLWCxJQUFMLENBQVU2QixVQURWLElBRUEsS0FBSzVCLFFBQUwsSUFBaUJyQyxZQUhyQixFQUlFO0FBQ0UsU0FBS29DLElBQUwsQ0FBVTZCLFVBQVYsQ0FBcUIsS0FBSzVCLFFBQTFCO0FBQ0g7O0FBRUQsT0FBS0EsUUFBTCxHQUFnQixFQUFoQjtBQUNILENBbEJEOztBQW9CQUwsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQlksVUFBakIsR0FBOEIsVUFBU0osSUFBVCxFQUFlO0FBQ3pDLE9BQUtQLGVBQUwsQ0FBcUIsQ0FBckI7O0FBRUEsTUFBSSxLQUFLVCxrQkFBVCxFQUE2QjtBQUN6QmdCLElBQUFBLElBQUksR0FBR0EsSUFBSSxDQUFDQyxXQUFMLEVBQVA7QUFDSDs7QUFFRCxNQUFJRCxJQUFJLElBQUkxQyxzQkFBUixJQUFrQzBDLElBQUksSUFBSXZDLHVCQUE5QyxFQUF1RTtBQUNuRSxTQUFLb0IsZUFBTCxDQUFxQjJCLEdBQXJCO0FBQ0g7O0FBRUQsTUFDSSxLQUFLNUIsTUFBTCxDQUFZdUIsTUFBWixLQUNDLEVBQUVILElBQUksSUFBSTdELFlBQVYsS0FBMkIsS0FBS21DLFFBQUwsQ0FBY1ksT0FEMUMsQ0FESixFQUdFO0FBQ0UsUUFBSXVCLEdBQUcsR0FBRyxLQUFLN0IsTUFBTCxDQUFZOEIsV0FBWixDQUF3QlYsSUFBeEIsQ0FBVjs7QUFDQSxRQUFJUyxHQUFHLEtBQUssQ0FBQyxDQUFiLEVBQWdCO0FBQ1osVUFBSSxLQUFLbEMsSUFBTCxDQUFVNkIsVUFBZCxFQUEwQjtBQUN0QkssUUFBQUEsR0FBRyxHQUFHLEtBQUs3QixNQUFMLENBQVl1QixNQUFaLEdBQXFCTSxHQUEzQjs7QUFDQSxlQUFPQSxHQUFHLEVBQVYsRUFBYyxLQUFLbEMsSUFBTCxDQUFVNkIsVUFBVixDQUFxQixLQUFLeEIsTUFBTCxDQUFZNEIsR0FBWixFQUFyQjtBQUNqQixPQUhELE1BR08sS0FBSzVCLE1BQUwsQ0FBWXVCLE1BQVosR0FBcUJNLEdBQXJCO0FBQ1YsS0FMRCxNQUtPLElBQUlULElBQUksS0FBSyxHQUFULElBQWdCLENBQUMsS0FBSzFCLFFBQUwsQ0FBY1ksT0FBbkMsRUFBNEM7QUFDL0MsV0FBS2EsYUFBTCxDQUFtQkMsSUFBbkI7O0FBQ0EsV0FBS1csZ0JBQUw7QUFDSDtBQUNKLEdBZEQsTUFjTyxJQUFJLENBQUMsS0FBS3JDLFFBQUwsQ0FBY1ksT0FBZixLQUEyQmMsSUFBSSxLQUFLLElBQVQsSUFBaUJBLElBQUksS0FBSyxHQUFyRCxDQUFKLEVBQStEO0FBQ2xFLFNBQUtELGFBQUwsQ0FBbUJDLElBQW5COztBQUNBLFNBQUtXLGdCQUFMO0FBQ0g7QUFDSixDQTdCRDs7QUErQkF4QyxNQUFNLENBQUNxQixTQUFQLENBQWlCb0IsZ0JBQWpCLEdBQW9DLFlBQVc7QUFDM0MsTUFDSSxLQUFLdEMsUUFBTCxDQUFjWSxPQUFkLElBQ0EsS0FBS1osUUFBTCxDQUFjdUMsb0JBRGQsSUFFQSxLQUFLaEMsZUFBTCxDQUFxQixLQUFLQSxlQUFMLENBQXFCc0IsTUFBckIsR0FBOEIsQ0FBbkQsQ0FISixFQUlFO0FBQ0UsU0FBS1EsZ0JBQUw7QUFDSCxHQU5ELE1BTU87QUFDSCxTQUFLSixZQUFMO0FBQ0g7QUFDSixDQVZEOztBQVlBcEMsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQm1CLGdCQUFqQixHQUFvQyxZQUFXO0FBQzNDLE1BQUlYLElBQUksR0FBRyxLQUFLeEIsUUFBaEI7QUFFQSxPQUFLK0IsWUFBTCxHQUgyQyxDQUszQztBQUNBOztBQUNBLE1BQUksS0FBSzNCLE1BQUwsQ0FBWSxLQUFLQSxNQUFMLENBQVl1QixNQUFaLEdBQXFCLENBQWpDLE1BQXdDSCxJQUE1QyxFQUFrRDtBQUM5QyxRQUFJLEtBQUt6QixJQUFMLENBQVU2QixVQUFkLEVBQTBCO0FBQ3RCLFdBQUs3QixJQUFMLENBQVU2QixVQUFWLENBQXFCSixJQUFyQjtBQUNIOztBQUNELFNBQUtwQixNQUFMLENBQVk0QixHQUFaO0FBRUg7QUFDSixDQWREOztBQWdCQXJDLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJzQixZQUFqQixHQUFnQyxVQUFTZCxJQUFULEVBQWU7QUFDM0MsTUFBSSxLQUFLYix3QkFBVCxFQUFtQztBQUMvQmEsSUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNDLFdBQUwsRUFBUDtBQUNIOztBQUNELE9BQUt4QixXQUFMLEdBQW1CdUIsSUFBbkI7QUFDSCxDQUxEOztBQU9BN0IsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQnVCLFlBQWpCLEdBQWdDLFVBQVNDLEtBQVQsRUFBZ0I7QUFDNUMsT0FBS3RDLFlBQUwsSUFBcUJzQyxLQUFyQjtBQUNILENBRkQ7O0FBSUE3QyxNQUFNLENBQUNxQixTQUFQLENBQWlCeUIsV0FBakIsR0FBK0IsWUFBVztBQUN0QyxNQUFJLEtBQUsxQyxJQUFMLENBQVUyQyxXQUFkLEVBQ0ksS0FBSzNDLElBQUwsQ0FBVTJDLFdBQVYsQ0FBc0IsS0FBS3pDLFdBQTNCLEVBQXdDLEtBQUtDLFlBQTdDOztBQUNKLE1BQ0ksS0FBS0MsUUFBTCxJQUNBLENBQUN3QyxNQUFNLENBQUMzQixTQUFQLENBQWlCNEIsY0FBakIsQ0FBZ0NDLElBQWhDLENBQXFDLEtBQUsxQyxRQUExQyxFQUFvRCxLQUFLRixXQUF6RCxDQUZMLEVBR0U7QUFDRSxTQUFLRSxRQUFMLENBQWMsS0FBS0YsV0FBbkIsSUFBa0MsS0FBS0MsWUFBdkM7QUFDSDs7QUFDRCxPQUFLRCxXQUFMLEdBQW1CLEVBQW5CO0FBQ0EsT0FBS0MsWUFBTCxHQUFvQixFQUFwQjtBQUNILENBWEQ7O0FBYUFQLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUI4QixtQkFBakIsR0FBdUMsVUFBU04sS0FBVCxFQUFnQjtBQUNuRCxNQUFJTyxHQUFHLEdBQUdQLEtBQUssQ0FBQ1EsTUFBTixDQUFhdEQsVUFBYixDQUFWO0FBQUEsTUFDSThCLElBQUksR0FBR3VCLEdBQUcsR0FBRyxDQUFOLEdBQVVQLEtBQVYsR0FBa0JBLEtBQUssQ0FBQ1MsTUFBTixDQUFhLENBQWIsRUFBZ0JGLEdBQWhCLENBRDdCOztBQUdBLE1BQUksS0FBS3ZDLGtCQUFULEVBQTZCO0FBQ3pCZ0IsSUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNDLFdBQUwsRUFBUDtBQUNIOztBQUVELFNBQU9ELElBQVA7QUFDSCxDQVREOztBQVdBN0IsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQmtDLGFBQWpCLEdBQWlDLFVBQVNWLEtBQVQsRUFBZ0I7QUFDN0MsTUFBSSxLQUFLekMsSUFBTCxDQUFVb0QsdUJBQWQsRUFBdUM7QUFDbkMsUUFBSTNCLElBQUksR0FBRyxLQUFLc0IsbUJBQUwsQ0FBeUJOLEtBQXpCLENBQVg7O0FBQ0EsU0FBS3pDLElBQUwsQ0FBVW9ELHVCQUFWLENBQWtDLE1BQU0zQixJQUF4QyxFQUE4QyxNQUFNZ0IsS0FBcEQ7QUFDSDtBQUNKLENBTEQ7O0FBT0E3QyxNQUFNLENBQUNxQixTQUFQLENBQWlCbUMsdUJBQWpCLEdBQTJDLFVBQVNYLEtBQVQsRUFBZ0I7QUFDdkQsTUFBSSxLQUFLekMsSUFBTCxDQUFVb0QsdUJBQWQsRUFBdUM7QUFDbkMsUUFBSTNCLElBQUksR0FBRyxLQUFLc0IsbUJBQUwsQ0FBeUJOLEtBQXpCLENBQVg7O0FBQ0EsU0FBS3pDLElBQUwsQ0FBVW9ELHVCQUFWLENBQWtDLE1BQU0zQixJQUF4QyxFQUE4QyxNQUFNZ0IsS0FBcEQ7QUFDSDtBQUNKLENBTEQ7O0FBT0E3QyxNQUFNLENBQUNxQixTQUFQLENBQWlCb0MsU0FBakIsR0FBNkIsVUFBU1osS0FBVCxFQUFnQjtBQUN6QyxPQUFLdkIsZUFBTCxDQUFxQixDQUFyQjs7QUFFQSxNQUFJLEtBQUtsQixJQUFMLENBQVVxRCxTQUFkLEVBQXlCLEtBQUtyRCxJQUFMLENBQVVxRCxTQUFWLENBQW9CWixLQUFwQjtBQUN6QixNQUFJLEtBQUt6QyxJQUFMLENBQVVzRCxZQUFkLEVBQTRCLEtBQUt0RCxJQUFMLENBQVVzRCxZQUFWO0FBQy9CLENBTEQ7O0FBT0ExRCxNQUFNLENBQUNxQixTQUFQLENBQWlCc0MsT0FBakIsR0FBMkIsVUFBU2QsS0FBVCxFQUFnQjtBQUN2QyxPQUFLdkIsZUFBTCxDQUFxQixDQUFyQjs7QUFFQSxNQUFJLEtBQUtuQixRQUFMLENBQWNZLE9BQWQsSUFBeUIsS0FBS1osUUFBTCxDQUFjeUQsY0FBM0MsRUFBMkQ7QUFDdkQsUUFBSSxLQUFLeEQsSUFBTCxDQUFVeUQsWUFBZCxFQUE0QixLQUFLekQsSUFBTCxDQUFVeUQsWUFBVjtBQUM1QixRQUFJLEtBQUt6RCxJQUFMLENBQVVzQixNQUFkLEVBQXNCLEtBQUt0QixJQUFMLENBQVVzQixNQUFWLENBQWlCbUIsS0FBakI7QUFDdEIsUUFBSSxLQUFLekMsSUFBTCxDQUFVMEQsVUFBZCxFQUEwQixLQUFLMUQsSUFBTCxDQUFVMEQsVUFBVjtBQUM3QixHQUpELE1BSU87QUFDSCxTQUFLTCxTQUFMLENBQWUsWUFBWVosS0FBWixHQUFvQixJQUFuQztBQUNIO0FBQ0osQ0FWRDs7QUFZQTdDLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUIwQyxPQUFqQixHQUEyQixVQUFTQyxHQUFULEVBQWM7QUFDckMsTUFBSSxLQUFLNUQsSUFBTCxDQUFVMkQsT0FBZCxFQUF1QixLQUFLM0QsSUFBTCxDQUFVMkQsT0FBVixDQUFrQkMsR0FBbEI7QUFDMUIsQ0FGRDs7QUFJQWhFLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUI0QyxLQUFqQixHQUF5QixZQUFXO0FBQ2hDLE1BQUksS0FBSzdELElBQUwsQ0FBVTZCLFVBQWQsRUFBMEI7QUFDdEIsU0FDSSxJQUFJaUMsQ0FBQyxHQUFHLEtBQUt6RCxNQUFMLENBQVl1QixNQUR4QixFQUVJa0MsQ0FBQyxHQUFHLENBRlIsRUFHSSxLQUFLOUQsSUFBTCxDQUFVNkIsVUFBVixDQUFxQixLQUFLeEIsTUFBTCxDQUFZLEVBQUV5RCxDQUFkLENBQXJCLENBSEosQ0FJQztBQUNKOztBQUNELE1BQUksS0FBSzlELElBQUwsQ0FBVTZELEtBQWQsRUFBcUIsS0FBSzdELElBQUwsQ0FBVTZELEtBQVY7QUFDeEIsQ0FURCxDLENBV0E7OztBQUNBakUsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQjhDLEtBQWpCLEdBQXlCLFlBQVc7QUFDaEMsTUFBSSxLQUFLL0QsSUFBTCxDQUFVZ0UsT0FBZCxFQUF1QixLQUFLaEUsSUFBTCxDQUFVZ0UsT0FBVjs7QUFDdkIsT0FBS2xELFVBQUwsQ0FBZ0JpRCxLQUFoQjs7QUFFQSxPQUFLOUQsUUFBTCxHQUFnQixFQUFoQjtBQUNBLE9BQUtDLFdBQUwsR0FBbUIsRUFBbkI7QUFDQSxPQUFLRSxRQUFMLEdBQWdCLElBQWhCO0FBQ0EsT0FBS0MsTUFBTCxHQUFjLEVBQWQ7QUFFQSxNQUFJLEtBQUtMLElBQUwsQ0FBVWUsWUFBZCxFQUE0QixLQUFLZixJQUFMLENBQVVlLFlBQVYsQ0FBdUIsSUFBdkI7QUFDL0IsQ0FWRCxDLENBWUE7OztBQUNBbkIsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQmdELGFBQWpCLEdBQWlDLFVBQVMxQyxJQUFULEVBQWU7QUFDNUMsT0FBS3dDLEtBQUw7QUFDQSxPQUFLRyxHQUFMLENBQVMzQyxJQUFUO0FBQ0gsQ0FIRDs7QUFLQTNCLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJrRCxLQUFqQixHQUF5QixVQUFTQyxLQUFULEVBQWdCO0FBQ3JDLE9BQUt0RCxVQUFMLENBQWdCcUQsS0FBaEIsQ0FBc0JDLEtBQXRCO0FBQ0gsQ0FGRDs7QUFJQXhFLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJpRCxHQUFqQixHQUF1QixVQUFTRSxLQUFULEVBQWdCO0FBQ25DLE9BQUt0RCxVQUFMLENBQWdCb0QsR0FBaEIsQ0FBb0JFLEtBQXBCO0FBQ0gsQ0FGRDs7QUFJQXhFLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJvRCxLQUFqQixHQUF5QixZQUFXO0FBQ2hDLE9BQUt2RCxVQUFMLENBQWdCdUQsS0FBaEI7QUFDSCxDQUZEOztBQUlBekUsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQnFELE1BQWpCLEdBQTBCLFlBQVc7QUFDakMsT0FBS3hELFVBQUwsQ0FBZ0J3RCxNQUFoQjtBQUNILENBRkQsQyxDQUlBOzs7QUFDQTFFLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJzRCxVQUFqQixHQUE4QjNFLE1BQU0sQ0FBQ3FCLFNBQVAsQ0FBaUJrRCxLQUEvQztBQUNBdkUsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQnVELElBQWpCLEdBQXdCNUUsTUFBTSxDQUFDcUIsU0FBUCxDQUFpQmlELEdBQXpDO0FBRUFPLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjlFLE1BQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFRva2VuaXplciA9IHJlcXVpcmUoXCIuL1Rva2VuaXplci5qc1wiKTtcblxuLypcblx0T3B0aW9uczpcblxuXHR4bWxNb2RlOiBEaXNhYmxlcyB0aGUgc3BlY2lhbCBiZWhhdmlvciBmb3Igc2NyaXB0L3N0eWxlIHRhZ3MgKGZhbHNlIGJ5IGRlZmF1bHQpXG5cdGxvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzOiBjYWxsIC50b0xvd2VyQ2FzZSBmb3IgZWFjaCBhdHRyaWJ1dGUgbmFtZSAodHJ1ZSBpZiB4bWxNb2RlIGlzIGBmYWxzZWApXG5cdGxvd2VyQ2FzZVRhZ3M6IGNhbGwgLnRvTG93ZXJDYXNlIGZvciBlYWNoIHRhZyBuYW1lICh0cnVlIGlmIHhtbE1vZGUgaXMgYGZhbHNlYClcbiovXG5cbi8qXG5cdENhbGxiYWNrczpcblxuXHRvbmNkYXRhZW5kLFxuXHRvbmNkYXRhc3RhcnQsXG5cdG9uY2xvc2V0YWcsXG5cdG9uY29tbWVudCxcblx0b25jb21tZW50ZW5kLFxuXHRvbmVycm9yLFxuXHRvbm9wZW50YWcsXG5cdG9ucHJvY2Vzc2luZ2luc3RydWN0aW9uLFxuXHRvbnJlc2V0LFxuXHRvbnRleHRcbiovXG5cbnZhciBmb3JtVGFncyA9IHtcbiAgICBpbnB1dDogdHJ1ZSxcbiAgICBvcHRpb246IHRydWUsXG4gICAgb3B0Z3JvdXA6IHRydWUsXG4gICAgc2VsZWN0OiB0cnVlLFxuICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICBkYXRhbGlzdDogdHJ1ZSxcbiAgICB0ZXh0YXJlYTogdHJ1ZVxufTtcblxudmFyIG9wZW5JbXBsaWVzQ2xvc2UgPSB7XG4gICAgdHI6IHsgdHI6IHRydWUsIHRoOiB0cnVlLCB0ZDogdHJ1ZSB9LFxuICAgIHRoOiB7IHRoOiB0cnVlIH0sXG4gICAgdGQ6IHsgdGhlYWQ6IHRydWUsIHRoOiB0cnVlLCB0ZDogdHJ1ZSB9LFxuICAgIGJvZHk6IHsgaGVhZDogdHJ1ZSwgbGluazogdHJ1ZSwgc2NyaXB0OiB0cnVlIH0sXG4gICAgbGk6IHsgbGk6IHRydWUgfSxcbiAgICBwOiB7IHA6IHRydWUgfSxcbiAgICBoMTogeyBwOiB0cnVlIH0sXG4gICAgaDI6IHsgcDogdHJ1ZSB9LFxuICAgIGgzOiB7IHA6IHRydWUgfSxcbiAgICBoNDogeyBwOiB0cnVlIH0sXG4gICAgaDU6IHsgcDogdHJ1ZSB9LFxuICAgIGg2OiB7IHA6IHRydWUgfSxcbiAgICBzZWxlY3Q6IGZvcm1UYWdzLFxuICAgIGlucHV0OiBmb3JtVGFncyxcbiAgICBvdXRwdXQ6IGZvcm1UYWdzLFxuICAgIGJ1dHRvbjogZm9ybVRhZ3MsXG4gICAgZGF0YWxpc3Q6IGZvcm1UYWdzLFxuICAgIHRleHRhcmVhOiBmb3JtVGFncyxcbiAgICBvcHRpb246IHsgb3B0aW9uOiB0cnVlIH0sXG4gICAgb3B0Z3JvdXA6IHsgb3B0Z3JvdXA6IHRydWUgfVxufTtcblxudmFyIHZvaWRFbGVtZW50cyA9IHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgYXJlYTogdHJ1ZSxcbiAgICBiYXNlOiB0cnVlLFxuICAgIGJhc2Vmb250OiB0cnVlLFxuICAgIGJyOiB0cnVlLFxuICAgIGNvbDogdHJ1ZSxcbiAgICBjb21tYW5kOiB0cnVlLFxuICAgIGVtYmVkOiB0cnVlLFxuICAgIGZyYW1lOiB0cnVlLFxuICAgIGhyOiB0cnVlLFxuICAgIGltZzogdHJ1ZSxcbiAgICBpbnB1dDogdHJ1ZSxcbiAgICBpc2luZGV4OiB0cnVlLFxuICAgIGtleWdlbjogdHJ1ZSxcbiAgICBsaW5rOiB0cnVlLFxuICAgIG1ldGE6IHRydWUsXG4gICAgcGFyYW06IHRydWUsXG4gICAgc291cmNlOiB0cnVlLFxuICAgIHRyYWNrOiB0cnVlLFxuICAgIHdicjogdHJ1ZVxufTtcblxudmFyIGZvcmVpZ25Db250ZXh0RWxlbWVudHMgPSB7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIG1hdGg6IHRydWUsXG4gICAgc3ZnOiB0cnVlXG59O1xudmFyIGh0bWxJbnRlZ3JhdGlvbkVsZW1lbnRzID0ge1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICBtaTogdHJ1ZSxcbiAgICBtbzogdHJ1ZSxcbiAgICBtbjogdHJ1ZSxcbiAgICBtczogdHJ1ZSxcbiAgICBtdGV4dDogdHJ1ZSxcbiAgICBcImFubm90YXRpb24teG1sXCI6IHRydWUsXG4gICAgZm9yZWlnbk9iamVjdDogdHJ1ZSxcbiAgICBkZXNjOiB0cnVlLFxuICAgIHRpdGxlOiB0cnVlXG59O1xuXG52YXIgcmVfbmFtZUVuZCA9IC9cXHN8XFwvLztcblxuZnVuY3Rpb24gUGFyc2VyKGNicywgb3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuX2NicyA9IGNicyB8fCB7fTtcblxuICAgIHRoaXMuX3RhZ25hbWUgPSBcIlwiO1xuICAgIHRoaXMuX2F0dHJpYm5hbWUgPSBcIlwiO1xuICAgIHRoaXMuX2F0dHJpYnZhbHVlID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJzID0gbnVsbDtcbiAgICB0aGlzLl9zdGFjayA9IFtdO1xuICAgIHRoaXMuX2ZvcmVpZ25Db250ZXh0ID0gW107XG5cbiAgICB0aGlzLnN0YXJ0SW5kZXggPSAwO1xuICAgIHRoaXMuZW5kSW5kZXggPSBudWxsO1xuXG4gICAgdGhpcy5fbG93ZXJDYXNlVGFnTmFtZXMgPVxuICAgICAgICBcImxvd2VyQ2FzZVRhZ3NcIiBpbiB0aGlzLl9vcHRpb25zXG4gICAgICAgICAgICA/ICEhdGhpcy5fb3B0aW9ucy5sb3dlckNhc2VUYWdzXG4gICAgICAgICAgICA6ICF0aGlzLl9vcHRpb25zLnhtbE1vZGU7XG4gICAgdGhpcy5fbG93ZXJDYXNlQXR0cmlidXRlTmFtZXMgPVxuICAgICAgICBcImxvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzXCIgaW4gdGhpcy5fb3B0aW9uc1xuICAgICAgICAgICAgPyAhIXRoaXMuX29wdGlvbnMubG93ZXJDYXNlQXR0cmlidXRlTmFtZXNcbiAgICAgICAgICAgIDogIXRoaXMuX29wdGlvbnMueG1sTW9kZTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLlRva2VuaXplcikge1xuICAgICAgICBUb2tlbml6ZXIgPSB0aGlzLl9vcHRpb25zLlRva2VuaXplcjtcbiAgICB9XG4gICAgdGhpcy5fdG9rZW5pemVyID0gbmV3IFRva2VuaXplcih0aGlzLl9vcHRpb25zLCB0aGlzKTtcblxuICAgIGlmICh0aGlzLl9jYnMub25wYXJzZXJpbml0KSB0aGlzLl9jYnMub25wYXJzZXJpbml0KHRoaXMpO1xufVxuXG5yZXF1aXJlKFwiaW5oZXJpdHNcIikoUGFyc2VyLCByZXF1aXJlKFwiZXZlbnRzXCIpLkV2ZW50RW1pdHRlcik7XG5cblBhcnNlci5wcm90b3R5cGUuX3VwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24oaW5pdGlhbE9mZnNldCkge1xuICAgIGlmICh0aGlzLmVuZEluZGV4ID09PSBudWxsKSB7XG4gICAgICAgIGlmICh0aGlzLl90b2tlbml6ZXIuX3NlY3Rpb25TdGFydCA8PSBpbml0aWFsT2Zmc2V0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0SW5kZXggPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFydEluZGV4ID0gdGhpcy5fdG9rZW5pemVyLl9zZWN0aW9uU3RhcnQgLSBpbml0aWFsT2Zmc2V0O1xuICAgICAgICB9XG4gICAgfSBlbHNlIHRoaXMuc3RhcnRJbmRleCA9IHRoaXMuZW5kSW5kZXggKyAxO1xuICAgIHRoaXMuZW5kSW5kZXggPSB0aGlzLl90b2tlbml6ZXIuZ2V0QWJzb2x1dGVJbmRleCgpO1xufTtcblxuLy9Ub2tlbml6ZXIgZXZlbnQgaGFuZGxlcnNcblBhcnNlci5wcm90b3R5cGUub250ZXh0ID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKDEpO1xuICAgIHRoaXMuZW5kSW5kZXgtLTtcblxuICAgIGlmICh0aGlzLl9jYnMub250ZXh0KSB0aGlzLl9jYnMub250ZXh0KGRhdGEpO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbm9wZW50YWduYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICh0aGlzLl9sb3dlckNhc2VUYWdOYW1lcykge1xuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX3RhZ25hbWUgPSBuYW1lO1xuXG4gICAgaWYgKCF0aGlzLl9vcHRpb25zLnhtbE1vZGUgJiYgbmFtZSBpbiBvcGVuSW1wbGllc0Nsb3NlKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICB2YXIgZWw7XG4gICAgICAgICAgICAoZWwgPSB0aGlzLl9zdGFja1t0aGlzLl9zdGFjay5sZW5ndGggLSAxXSkgaW5cbiAgICAgICAgICAgIG9wZW5JbXBsaWVzQ2xvc2VbbmFtZV07XG4gICAgICAgICAgICB0aGlzLm9uY2xvc2V0YWcoZWwpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMueG1sTW9kZSB8fCAhKG5hbWUgaW4gdm9pZEVsZW1lbnRzKSkge1xuICAgICAgICB0aGlzLl9zdGFjay5wdXNoKG5hbWUpO1xuICAgICAgICBpZiAobmFtZSBpbiBmb3JlaWduQ29udGV4dEVsZW1lbnRzKSB0aGlzLl9mb3JlaWduQ29udGV4dC5wdXNoKHRydWUpO1xuICAgICAgICBlbHNlIGlmIChuYW1lIGluIGh0bWxJbnRlZ3JhdGlvbkVsZW1lbnRzKVxuICAgICAgICAgICAgdGhpcy5fZm9yZWlnbkNvbnRleHQucHVzaChmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2Nicy5vbm9wZW50YWduYW1lKSB0aGlzLl9jYnMub25vcGVudGFnbmFtZShuYW1lKTtcbiAgICBpZiAodGhpcy5fY2JzLm9ub3BlbnRhZykgdGhpcy5fYXR0cmlicyA9IHt9O1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbm9wZW50YWdlbmQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbigxKTtcblxuICAgIGlmICh0aGlzLl9hdHRyaWJzKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYnMub25vcGVudGFnKVxuICAgICAgICAgICAgdGhpcy5fY2JzLm9ub3BlbnRhZyh0aGlzLl90YWduYW1lLCB0aGlzLl9hdHRyaWJzKTtcbiAgICAgICAgdGhpcy5fYXR0cmlicyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgICAhdGhpcy5fb3B0aW9ucy54bWxNb2RlICYmXG4gICAgICAgIHRoaXMuX2Nicy5vbmNsb3NldGFnICYmXG4gICAgICAgIHRoaXMuX3RhZ25hbWUgaW4gdm9pZEVsZW1lbnRzXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Nicy5vbmNsb3NldGFnKHRoaXMuX3RhZ25hbWUpO1xuICAgIH1cblxuICAgIHRoaXMuX3RhZ25hbWUgPSBcIlwiO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmNsb3NldGFnID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKDEpO1xuXG4gICAgaWYgKHRoaXMuX2xvd2VyQ2FzZVRhZ05hbWVzKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChuYW1lIGluIGZvcmVpZ25Db250ZXh0RWxlbWVudHMgfHwgbmFtZSBpbiBodG1sSW50ZWdyYXRpb25FbGVtZW50cykge1xuICAgICAgICB0aGlzLl9mb3JlaWduQ29udGV4dC5wb3AoKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAgIHRoaXMuX3N0YWNrLmxlbmd0aCAmJlxuICAgICAgICAoIShuYW1lIGluIHZvaWRFbGVtZW50cykgfHwgdGhpcy5fb3B0aW9ucy54bWxNb2RlKVxuICAgICkge1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5fc3RhY2subGFzdEluZGV4T2YobmFtZSk7XG4gICAgICAgIGlmIChwb3MgIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2JzLm9uY2xvc2V0YWcpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSB0aGlzLl9zdGFjay5sZW5ndGggLSBwb3M7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHBvcy0tKSB0aGlzLl9jYnMub25jbG9zZXRhZyh0aGlzLl9zdGFjay5wb3AoKSk7XG4gICAgICAgICAgICB9IGVsc2UgdGhpcy5fc3RhY2subGVuZ3RoID0gcG9zO1xuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09IFwicFwiICYmICF0aGlzLl9vcHRpb25zLnhtbE1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMub25vcGVudGFnbmFtZShuYW1lKTtcbiAgICAgICAgICAgIHRoaXMuX2Nsb3NlQ3VycmVudFRhZygpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICghdGhpcy5fb3B0aW9ucy54bWxNb2RlICYmIChuYW1lID09PSBcImJyXCIgfHwgbmFtZSA9PT0gXCJwXCIpKSB7XG4gICAgICAgIHRoaXMub25vcGVudGFnbmFtZShuYW1lKTtcbiAgICAgICAgdGhpcy5fY2xvc2VDdXJyZW50VGFnKCk7XG4gICAgfVxufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbnNlbGZjbG9zaW5ndGFnID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKFxuICAgICAgICB0aGlzLl9vcHRpb25zLnhtbE1vZGUgfHxcbiAgICAgICAgdGhpcy5fb3B0aW9ucy5yZWNvZ25pemVTZWxmQ2xvc2luZyB8fFxuICAgICAgICB0aGlzLl9mb3JlaWduQ29udGV4dFt0aGlzLl9mb3JlaWduQ29udGV4dC5sZW5ndGggLSAxXVxuICAgICkge1xuICAgICAgICB0aGlzLl9jbG9zZUN1cnJlbnRUYWcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9ub3BlbnRhZ2VuZCgpO1xuICAgIH1cbn07XG5cblBhcnNlci5wcm90b3R5cGUuX2Nsb3NlQ3VycmVudFRhZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuYW1lID0gdGhpcy5fdGFnbmFtZTtcblxuICAgIHRoaXMub25vcGVudGFnZW5kKCk7XG5cbiAgICAvL3NlbGYtY2xvc2luZyB0YWdzIHdpbGwgYmUgb24gdGhlIHRvcCBvZiB0aGUgc3RhY2tcbiAgICAvLyhjaGVhcGVyIGNoZWNrIHRoYW4gaW4gb25jbG9zZXRhZylcbiAgICBpZiAodGhpcy5fc3RhY2tbdGhpcy5fc3RhY2subGVuZ3RoIC0gMV0gPT09IG5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nicy5vbmNsb3NldGFnKSB7XG4gICAgICAgICAgICB0aGlzLl9jYnMub25jbG9zZXRhZyhuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdGFjay5wb3AoKTtcbiAgICAgICAgXG4gICAgfVxufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmF0dHJpYm5hbWUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgaWYgKHRoaXMuX2xvd2VyQ2FzZUF0dHJpYnV0ZU5hbWVzKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHRoaXMuX2F0dHJpYm5hbWUgPSBuYW1lO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmF0dHJpYmRhdGEgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX2F0dHJpYnZhbHVlICs9IHZhbHVlO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmF0dHJpYmVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9jYnMub25hdHRyaWJ1dGUpXG4gICAgICAgIHRoaXMuX2Nicy5vbmF0dHJpYnV0ZSh0aGlzLl9hdHRyaWJuYW1lLCB0aGlzLl9hdHRyaWJ2YWx1ZSk7XG4gICAgaWYgKFxuICAgICAgICB0aGlzLl9hdHRyaWJzICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fYXR0cmlicywgdGhpcy5fYXR0cmlibmFtZSlcbiAgICApIHtcbiAgICAgICAgdGhpcy5fYXR0cmlic1t0aGlzLl9hdHRyaWJuYW1lXSA9IHRoaXMuX2F0dHJpYnZhbHVlO1xuICAgIH1cbiAgICB0aGlzLl9hdHRyaWJuYW1lID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJ2YWx1ZSA9IFwiXCI7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLl9nZXRJbnN0cnVjdGlvbk5hbWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBpZHggPSB2YWx1ZS5zZWFyY2gocmVfbmFtZUVuZCksXG4gICAgICAgIG5hbWUgPSBpZHggPCAwID8gdmFsdWUgOiB2YWx1ZS5zdWJzdHIoMCwgaWR4KTtcblxuICAgIGlmICh0aGlzLl9sb3dlckNhc2VUYWdOYW1lcykge1xuICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmRlY2xhcmF0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodGhpcy5fY2JzLm9ucHJvY2Vzc2luZ2luc3RydWN0aW9uKSB7XG4gICAgICAgIHZhciBuYW1lID0gdGhpcy5fZ2V0SW5zdHJ1Y3Rpb25OYW1lKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fY2JzLm9ucHJvY2Vzc2luZ2luc3RydWN0aW9uKFwiIVwiICsgbmFtZSwgXCIhXCIgKyB2YWx1ZSk7XG4gICAgfVxufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbnByb2Nlc3NpbmdpbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2Nicy5vbnByb2Nlc3NpbmdpbnN0cnVjdGlvbikge1xuICAgICAgICB2YXIgbmFtZSA9IHRoaXMuX2dldEluc3RydWN0aW9uTmFtZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMuX2Nicy5vbnByb2Nlc3NpbmdpbnN0cnVjdGlvbihcIj9cIiArIG5hbWUsIFwiP1wiICsgdmFsdWUpO1xuICAgIH1cbn07XG5cblBhcnNlci5wcm90b3R5cGUub25jb21tZW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbig0KTtcblxuICAgIGlmICh0aGlzLl9jYnMub25jb21tZW50KSB0aGlzLl9jYnMub25jb21tZW50KHZhbHVlKTtcbiAgICBpZiAodGhpcy5fY2JzLm9uY29tbWVudGVuZCkgdGhpcy5fY2JzLm9uY29tbWVudGVuZCgpO1xufTtcblxuUGFyc2VyLnByb3RvdHlwZS5vbmNkYXRhID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB0aGlzLl91cGRhdGVQb3NpdGlvbigxKTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLnhtbE1vZGUgfHwgdGhpcy5fb3B0aW9ucy5yZWNvZ25pemVDREFUQSkge1xuICAgICAgICBpZiAodGhpcy5fY2JzLm9uY2RhdGFzdGFydCkgdGhpcy5fY2JzLm9uY2RhdGFzdGFydCgpO1xuICAgICAgICBpZiAodGhpcy5fY2JzLm9udGV4dCkgdGhpcy5fY2JzLm9udGV4dCh2YWx1ZSk7XG4gICAgICAgIGlmICh0aGlzLl9jYnMub25jZGF0YWVuZCkgdGhpcy5fY2JzLm9uY2RhdGFlbmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uY29tbWVudChcIltDREFUQVtcIiArIHZhbHVlICsgXCJdXVwiKTtcbiAgICB9XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICBpZiAodGhpcy5fY2JzLm9uZXJyb3IpIHRoaXMuX2Nicy5vbmVycm9yKGVycik7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLm9uZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2Nicy5vbmNsb3NldGFnKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuX3N0YWNrLmxlbmd0aDtcbiAgICAgICAgICAgIGkgPiAwO1xuICAgICAgICAgICAgdGhpcy5fY2JzLm9uY2xvc2V0YWcodGhpcy5fc3RhY2tbLS1pXSlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2Nicy5vbmVuZCkgdGhpcy5fY2JzLm9uZW5kKCk7XG59O1xuXG4vL1Jlc2V0cyB0aGUgcGFyc2VyIHRvIGEgYmxhbmsgc3RhdGUsIHJlYWR5IHRvIHBhcnNlIGEgbmV3IEhUTUwgZG9jdW1lbnRcblBhcnNlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fY2JzLm9ucmVzZXQpIHRoaXMuX2Nicy5vbnJlc2V0KCk7XG4gICAgdGhpcy5fdG9rZW5pemVyLnJlc2V0KCk7XG5cbiAgICB0aGlzLl90YWduYW1lID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJuYW1lID0gXCJcIjtcbiAgICB0aGlzLl9hdHRyaWJzID0gbnVsbDtcbiAgICB0aGlzLl9zdGFjayA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX2Nicy5vbnBhcnNlcmluaXQpIHRoaXMuX2Nicy5vbnBhcnNlcmluaXQodGhpcyk7XG59O1xuXG4vL1BhcnNlcyBhIGNvbXBsZXRlIEhUTUwgZG9jdW1lbnQgYW5kIHB1c2hlcyBpdCB0byB0aGUgaGFuZGxlclxuUGFyc2VyLnByb3RvdHlwZS5wYXJzZUNvbXBsZXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLmVuZChkYXRhKTtcbn07XG5cblBhcnNlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihjaHVuaykge1xuICAgIHRoaXMuX3Rva2VuaXplci53cml0ZShjaHVuayk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgdGhpcy5fdG9rZW5pemVyLmVuZChjaHVuayk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdG9rZW5pemVyLnBhdXNlKCk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3Rva2VuaXplci5yZXN1bWUoKTtcbn07XG5cbi8vYWxpYXMgZm9yIGJhY2t3YXJkcyBjb21wYXRcblBhcnNlci5wcm90b3R5cGUucGFyc2VDaHVuayA9IFBhcnNlci5wcm90b3R5cGUud3JpdGU7XG5QYXJzZXIucHJvdG90eXBlLmRvbmUgPSBQYXJzZXIucHJvdG90eXBlLmVuZDtcblxubW9kdWxlLmV4cG9ydHMgPSBQYXJzZXI7XG4iXX0=