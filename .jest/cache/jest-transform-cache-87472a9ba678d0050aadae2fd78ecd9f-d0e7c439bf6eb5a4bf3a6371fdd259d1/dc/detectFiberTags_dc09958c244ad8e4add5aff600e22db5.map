{"version":3,"sources":["../src/detectFiberTags.js"],"names":["container","global","inst","Tester","React","ReactDOM","SuspenseWrapper","fallback","module","supportsMode","supportsContext","supportsForwardRef","supportsMemo","supportsProfiler","supportsSuspense","supportsLazy","Cls","Ctx","FwdRef","LazyComponent","HostRoot","getFiber","ClassComponent","Fragment","FunctionalComponent","MemoSFC","MemoClass","HostPortal","HostComponent","HostText","Mode","ContextConsumer","ContextProvider","value","ForwardRef","Profiler","id","onRender","Suspense","Lazy","getLazyFiber"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { fakeDynamicImport } from 'enzyme-adapter-utils';\n\nfunction getFiber(element) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return element;\n    }\n  }\n  ReactDOM.render(React.createElement(Tester), container);\n  return inst._reactInternalFiber.child;\n}\n\nfunction getLazyFiber(LazyComponent) {\n  const container = global.document.createElement('div');\n  let inst = null;\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Tester extends React.Component {\n    render() {\n      inst = this;\n      return React.createElement(LazyComponent);\n    }\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class SuspenseWrapper extends React.Component {\n    render() {\n      return React.createElement(\n        React.Suspense,\n        { fallback: false },\n        React.createElement(Tester),\n      );\n    }\n  }\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\n  return inst._reactInternalFiber.child;\n}\n\nmodule.exports = function detectFiberTags() {\n  const supportsMode = typeof React.StrictMode !== 'undefined';\n  const supportsContext = typeof React.createContext !== 'undefined';\n  const supportsForwardRef = typeof React.forwardRef !== 'undefined';\n  const supportsMemo = typeof React.memo !== 'undefined';\n  const supportsProfiler = typeof React.unstable_Profiler !== 'undefined' || typeof React.Profiler !== 'undefined';\n  const supportsSuspense = typeof React.Suspense !== 'undefined';\n  const supportsLazy = typeof React.lazy !== 'undefined';\n\n  function Fn() {\n    return null;\n  }\n  // eslint-disable-next-line react/prefer-stateless-function\n  class Cls extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  let Ctx = null;\n  let FwdRef = null;\n  let LazyComponent = null;\n  if (supportsContext) {\n    Ctx = React.createContext();\n  }\n  if (supportsForwardRef) {\n    // React will warn if we don't have both arguments.\n    // eslint-disable-next-line no-unused-vars\n    FwdRef = React.forwardRef((props, ref) => null);\n  }\n  if (supportsLazy) {\n    LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\n  }\n\n  return {\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\n    Fragment: getFiber([['nested']]).tag,\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\n    MemoSFC: supportsMemo\n      ? getFiber(React.createElement(React.memo(Fn))).tag\n      : -1,\n    MemoClass: supportsMemo\n      ? getFiber(React.createElement(React.memo(Cls))).tag\n      : -1,\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\n    HostComponent: getFiber(React.createElement('span')).tag,\n    HostText: getFiber('text').tag,\n    Mode: supportsMode\n      ? getFiber(React.createElement(React.StrictMode)).tag\n      : -1,\n    ContextConsumer: supportsContext\n      ? getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag\n      : -1,\n    ContextProvider: supportsContext\n      ? getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag\n      : -1,\n    ForwardRef: supportsForwardRef\n      ? getFiber(React.createElement(FwdRef)).tag\n      : -1,\n    Profiler: supportsProfiler\n      ? getFiber(React.createElement((React.Profiler || React.unstable_Profiler), { id: 'mock', onRender() {} })).tag\n      : -1,\n    Suspense: supportsSuspense\n      ? getFiber(React.createElement(React.Suspense, { fallback: false })).tag\n      : -1,\n    Lazy: supportsLazy\n      ? getLazyFiber(LazyComponent).tag\n      : -1,\n  };\n};\n"]}