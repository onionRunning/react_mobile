83c256af2e3dfc11757948c18b8e58de
/*
	pseudo selectors

	---

	they are available in two forms:
	* filters called when the selector
	  is compiled and return a function
	  that needs to return next()
	* pseudos get called on execution
	  they need to return a boolean
*/
var DomUtils = require("domutils"),
    isTag = DomUtils.isTag,
    getText = DomUtils.getText,
    getParent = DomUtils.getParent,
    getChildren = DomUtils.getChildren,
    getSiblings = DomUtils.getSiblings,
    hasAttrib = DomUtils.hasAttrib,
    getName = DomUtils.getName,
    getAttribute = DomUtils.getAttributeValue,
    getNCheck = require("nth-check"),
    checkAttrib = require("./attributes.js").rules.equals,
    BaseFuncs = require("boolbase"),
    trueFunc = BaseFuncs.trueFunc,
    falseFunc = BaseFuncs.falseFunc; //helper methods


function getFirstElement(elems) {
  for (var i = 0; elems && i < elems.length; i++) {
    if (isTag(elems[i])) return elems[i];
  }
}

function getAttribFunc(name, value) {
  var data = {
    name: name,
    value: value
  };
  return function attribFunc(next) {
    return checkAttrib(next, data);
  };
}

function getChildFunc(next) {
  return function (elem) {
    return !!getParent(elem) && next(elem);
  };
}

var filters = {
  contains: function (next, text) {
    return function contains(elem) {
      return next(elem) && getText(elem).indexOf(text) >= 0;
    };
  },
  icontains: function (next, text) {
    var itext = text.toLowerCase();
    return function icontains(elem) {
      return next(elem) && getText(elem).toLowerCase().indexOf(itext) >= 0;
    };
  },
  //location specific methods
  "nth-child": function (next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthChild(elem) {
      var siblings = getSiblings(elem);

      for (var i = 0, pos = 0; i < siblings.length; i++) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;else pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  "nth-last-child": function (next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthLastChild(elem) {
      var siblings = getSiblings(elem);

      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;else pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  "nth-of-type": function (next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthOfType(elem) {
      var siblings = getSiblings(elem);

      for (var pos = 0, i = 0; i < siblings.length; i++) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;
          if (getName(siblings[i]) === getName(elem)) pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  "nth-last-of-type": function (next, rule) {
    var func = getNCheck(rule);
    if (func === falseFunc) return func;
    if (func === trueFunc) return getChildFunc(next);
    return function nthLastOfType(elem) {
      var siblings = getSiblings(elem);

      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {
        if (isTag(siblings[i])) {
          if (siblings[i] === elem) break;
          if (getName(siblings[i]) === getName(elem)) pos++;
        }
      }

      return func(pos) && next(elem);
    };
  },
  //TODO determine the actual root element
  root: function (next) {
    return function (elem) {
      return !getParent(elem) && next(elem);
    };
  },
  scope: function (next, rule, options, context) {
    if (!context || context.length === 0) {
      //equivalent to :root
      return filters.root(next);
    }

    if (context.length === 1) {
      //NOTE: can't be unpacked, as :has uses this for side-effects
      return function (elem) {
        return context[0] === elem && next(elem);
      };
    }

    return function (elem) {
      return context.indexOf(elem) >= 0 && next(elem);
    };
  },
  //jQuery extensions (others follow as pseudos)
  checkbox: getAttribFunc("type", "checkbox"),
  file: getAttribFunc("type", "file"),
  password: getAttribFunc("type", "password"),
  radio: getAttribFunc("type", "radio"),
  reset: getAttribFunc("type", "reset"),
  image: getAttribFunc("type", "image"),
  submit: getAttribFunc("type", "submit")
}; //while filters are precompiled, pseudos get called when they are needed

var pseudos = {
  empty: function (elem) {
    return !getChildren(elem).some(function (elem) {
      return isTag(elem) || elem.type === "text";
    });
  },
  "first-child": function (elem) {
    return getFirstElement(getSiblings(elem)) === elem;
  },
  "last-child": function (elem) {
    var siblings = getSiblings(elem);

    for (var i = siblings.length - 1; i >= 0; i--) {
      if (siblings[i] === elem) return true;
      if (isTag(siblings[i])) break;
    }

    return false;
  },
  "first-of-type": function (elem) {
    var siblings = getSiblings(elem);

    for (var i = 0; i < siblings.length; i++) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) return true;
        if (getName(siblings[i]) === getName(elem)) break;
      }
    }

    return false;
  },
  "last-of-type": function (elem) {
    var siblings = getSiblings(elem);

    for (var i = siblings.length - 1; i >= 0; i--) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) return true;
        if (getName(siblings[i]) === getName(elem)) break;
      }
    }

    return false;
  },
  "only-of-type": function (elem) {
    var siblings = getSiblings(elem);

    for (var i = 0, j = siblings.length; i < j; i++) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) continue;
        if (getName(siblings[i]) === getName(elem)) return false;
      }
    }

    return true;
  },
  "only-child": function (elem) {
    var siblings = getSiblings(elem);

    for (var i = 0; i < siblings.length; i++) {
      if (isTag(siblings[i]) && siblings[i] !== elem) return false;
    }

    return true;
  },
  //:matches(a, area, link)[href]
  link: function (elem) {
    return hasAttrib(elem, "href");
  },
  visited: falseFunc,
  //seems to be a valid implementation
  //TODO: :any-link once the name is finalized (as an alias of :link)
  //forms
  //to consider: :target
  //:matches([selected], select:not([multiple]):not(> option[selected]) > option:first-of-type)
  selected: function (elem) {
    if (hasAttrib(elem, "selected")) return true;else if (getName(elem) !== "option") return false; //the first <option> in a <select> is also selected

    var parent = getParent(elem);
    if (!parent || getName(parent) !== "select" || hasAttrib(parent, "multiple")) return false;
    var siblings = getChildren(parent),
        sawElem = false;

    for (var i = 0; i < siblings.length; i++) {
      if (isTag(siblings[i])) {
        if (siblings[i] === elem) {
          sawElem = true;
        } else if (!sawElem) {
          return false;
        } else if (hasAttrib(siblings[i], "selected")) {
          return false;
        }
      }
    }

    return sawElem;
  },
  //https://html.spec.whatwg.org/multipage/scripting.html#disabled-elements
  //:matches(
  //  :matches(button, input, select, textarea, menuitem, optgroup, option)[disabled],
  //  optgroup[disabled] > option),
  // fieldset[disabled] * //TODO not child of first <legend>
  //)
  disabled: function (elem) {
    return hasAttrib(elem, "disabled");
  },
  enabled: function (elem) {
    return !hasAttrib(elem, "disabled");
  },
  //:matches(:matches(:radio, :checkbox)[checked], :selected) (TODO menuitem)
  checked: function (elem) {
    return hasAttrib(elem, "checked") || pseudos.selected(elem);
  },
  //:matches(input, select, textarea)[required]
  required: function (elem) {
    return hasAttrib(elem, "required");
  },
  //:matches(input, select, textarea):not([required])
  optional: function (elem) {
    return !hasAttrib(elem, "required");
  },
  //jQuery extensions
  //:not(:empty)
  parent: function (elem) {
    return !pseudos.empty(elem);
  },
  //:matches(h1, h2, h3, h4, h5, h6)
  header: function (elem) {
    var name = getName(elem);
    return name === "h1" || name === "h2" || name === "h3" || name === "h4" || name === "h5" || name === "h6";
  },
  //:matches(button, input[type=button])
  button: function (elem) {
    var name = getName(elem);
    return name === "button" || name === "input" && getAttribute(elem, "type") === "button";
  },
  //:matches(input, textarea, select, button)
  input: function (elem) {
    var name = getName(elem);
    return name === "input" || name === "textarea" || name === "select" || name === "button";
  },
  //input:matches(:not([type!='']), [type='text' i])
  text: function (elem) {
    var attr;
    return getName(elem) === "input" && (!(attr = getAttribute(elem, "type")) || attr.toLowerCase() === "text");
  }
};

function verifyArgs(func, name, subselect) {
  if (subselect === null) {
    if (func.length > 1 && name !== "scope") {
      throw new SyntaxError("pseudo-selector :" + name + " requires an argument");
    }
  } else {
    if (func.length === 1) {
      throw new SyntaxError("pseudo-selector :" + name + " doesn't have any arguments");
    }
  }
} //FIXME this feels hacky


var re_CSS3 = /^(?:(?:nth|last|first|only)-(?:child|of-type)|root|empty|(?:en|dis)abled|checked|not)$/;
module.exports = {
  compile: function (next, data, options, context) {
    var name = data.name,
        subselect = data.data;

    if (options && options.strict && !re_CSS3.test(name)) {
      throw SyntaxError(":" + name + " isn't part of CSS3");
    }

    if (typeof filters[name] === "function") {
      verifyArgs(filters[name], name, subselect);
      return filters[name](next, subselect, options, context);
    } else if (typeof pseudos[name] === "function") {
      var func = pseudos[name];
      verifyArgs(func, name, subselect);
      if (next === trueFunc) return func;
      return function pseudoArgs(elem) {
        return func(elem, subselect) && next(elem);
      };
    } else {
      throw new SyntaxError("unmatched pseudo-class :" + name);
    }
  },
  filters: filters,
  pseudos: pseudos
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBzZXVkb3MuanMiXSwibmFtZXMiOlsiRG9tVXRpbHMiLCJyZXF1aXJlIiwiaXNUYWciLCJnZXRUZXh0IiwiZ2V0UGFyZW50IiwiZ2V0Q2hpbGRyZW4iLCJnZXRTaWJsaW5ncyIsImhhc0F0dHJpYiIsImdldE5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGVWYWx1ZSIsImdldE5DaGVjayIsImNoZWNrQXR0cmliIiwicnVsZXMiLCJlcXVhbHMiLCJCYXNlRnVuY3MiLCJ0cnVlRnVuYyIsImZhbHNlRnVuYyIsImdldEZpcnN0RWxlbWVudCIsImVsZW1zIiwiaSIsImxlbmd0aCIsImdldEF0dHJpYkZ1bmMiLCJuYW1lIiwidmFsdWUiLCJkYXRhIiwiYXR0cmliRnVuYyIsIm5leHQiLCJnZXRDaGlsZEZ1bmMiLCJlbGVtIiwiZmlsdGVycyIsImNvbnRhaW5zIiwidGV4dCIsImluZGV4T2YiLCJpY29udGFpbnMiLCJpdGV4dCIsInRvTG93ZXJDYXNlIiwicnVsZSIsImZ1bmMiLCJudGhDaGlsZCIsInNpYmxpbmdzIiwicG9zIiwibnRoTGFzdENoaWxkIiwibnRoT2ZUeXBlIiwibnRoTGFzdE9mVHlwZSIsInJvb3QiLCJzY29wZSIsIm9wdGlvbnMiLCJjb250ZXh0IiwiY2hlY2tib3giLCJmaWxlIiwicGFzc3dvcmQiLCJyYWRpbyIsInJlc2V0IiwiaW1hZ2UiLCJzdWJtaXQiLCJwc2V1ZG9zIiwiZW1wdHkiLCJzb21lIiwidHlwZSIsImoiLCJsaW5rIiwidmlzaXRlZCIsInNlbGVjdGVkIiwicGFyZW50Iiwic2F3RWxlbSIsImRpc2FibGVkIiwiZW5hYmxlZCIsImNoZWNrZWQiLCJyZXF1aXJlZCIsIm9wdGlvbmFsIiwiaGVhZGVyIiwiYnV0dG9uIiwiaW5wdXQiLCJhdHRyIiwidmVyaWZ5QXJncyIsInN1YnNlbGVjdCIsIlN5bnRheEVycm9yIiwicmVfQ1NTMyIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb21waWxlIiwic3RyaWN0IiwidGVzdCIsInBz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TjtBQUNBO0FBQ0QsR0F4QmU7QUF5QmhCTyxFQUFBQSxPQUFPLEVBQUVBLE9BekJPO0FBMEJoQjBCLEVBQUFBLE9BQU8sRUFBRUE7QUExQk8sQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuXHRwc2V1ZG8gc2VsZWN0b3JzXG5cblx0LS0tXG5cblx0dGhleSBhcmUgYXZhaWxhYmxlIGluIHR3byBmb3Jtczpcblx0KiBmaWx0ZXJzIGNhbGxlZCB3aGVuIHRoZSBzZWxlY3RvclxuXHQgIGlzIGNvbXBpbGVkIGFuZCByZXR1cm4gYSBmdW5jdGlvblxuXHQgIHRoYXQgbmVlZHMgdG8gcmV0dXJuIG5leHQoKVxuXHQqIHBzZXVkb3MgZ2V0IGNhbGxlZCBvbiBleGVjdXRpb25cblx0ICB0aGV5IG5lZWQgdG8gcmV0dXJuIGEgYm9vbGVhblxuKi9cblxudmFyIERvbVV0aWxzICAgID0gcmVxdWlyZShcImRvbXV0aWxzXCIpLFxuICAgIGlzVGFnICAgICAgID0gRG9tVXRpbHMuaXNUYWcsXG4gICAgZ2V0VGV4dCAgICAgPSBEb21VdGlscy5nZXRUZXh0LFxuICAgIGdldFBhcmVudCAgID0gRG9tVXRpbHMuZ2V0UGFyZW50LFxuICAgIGdldENoaWxkcmVuID0gRG9tVXRpbHMuZ2V0Q2hpbGRyZW4sXG4gICAgZ2V0U2libGluZ3MgPSBEb21VdGlscy5nZXRTaWJsaW5ncyxcbiAgICBoYXNBdHRyaWIgICA9IERvbVV0aWxzLmhhc0F0dHJpYixcbiAgICBnZXROYW1lICAgICA9IERvbVV0aWxzLmdldE5hbWUsXG4gICAgZ2V0QXR0cmlidXRlPSBEb21VdGlscy5nZXRBdHRyaWJ1dGVWYWx1ZSxcbiAgICBnZXROQ2hlY2sgICA9IHJlcXVpcmUoXCJudGgtY2hlY2tcIiksXG4gICAgY2hlY2tBdHRyaWIgPSByZXF1aXJlKFwiLi9hdHRyaWJ1dGVzLmpzXCIpLnJ1bGVzLmVxdWFscyxcbiAgICBCYXNlRnVuY3MgICA9IHJlcXVpcmUoXCJib29sYmFzZVwiKSxcbiAgICB0cnVlRnVuYyAgICA9IEJhc2VGdW5jcy50cnVlRnVuYyxcbiAgICBmYWxzZUZ1bmMgICA9IEJhc2VGdW5jcy5mYWxzZUZ1bmM7XG5cbi8vaGVscGVyIG1ldGhvZHNcbmZ1bmN0aW9uIGdldEZpcnN0RWxlbWVudChlbGVtcyl7XG5cdGZvcih2YXIgaSA9IDA7IGVsZW1zICYmIGkgPCBlbGVtcy5sZW5ndGg7IGkrKyl7XG5cdFx0aWYoaXNUYWcoZWxlbXNbaV0pKSByZXR1cm4gZWxlbXNbaV07XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0QXR0cmliRnVuYyhuYW1lLCB2YWx1ZSl7XG5cdHZhciBkYXRhID0ge25hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZX07XG5cdHJldHVybiBmdW5jdGlvbiBhdHRyaWJGdW5jKG5leHQpe1xuXHRcdHJldHVybiBjaGVja0F0dHJpYihuZXh0LCBkYXRhKTtcblx0fTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2hpbGRGdW5jKG5leHQpe1xuXHRyZXR1cm4gZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuICEhZ2V0UGFyZW50KGVsZW0pICYmIG5leHQoZWxlbSk7XG5cdH07XG59XG5cbnZhciBmaWx0ZXJzID0ge1xuXHRjb250YWluczogZnVuY3Rpb24obmV4dCwgdGV4dCl7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIGNvbnRhaW5zKGVsZW0pe1xuXHRcdFx0cmV0dXJuIG5leHQoZWxlbSkgJiYgZ2V0VGV4dChlbGVtKS5pbmRleE9mKHRleHQpID49IDA7XG5cdFx0fTtcblx0fSxcblx0aWNvbnRhaW5zOiBmdW5jdGlvbihuZXh0LCB0ZXh0KXtcblx0XHR2YXIgaXRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIGljb250YWlucyhlbGVtKXtcblx0XHRcdHJldHVybiBuZXh0KGVsZW0pICYmXG5cdFx0XHRcdGdldFRleHQoZWxlbSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGl0ZXh0KSA+PSAwO1xuXHRcdH07XG5cdH0sXG5cblx0Ly9sb2NhdGlvbiBzcGVjaWZpYyBtZXRob2RzXG5cdFwibnRoLWNoaWxkXCI6IGZ1bmN0aW9uKG5leHQsIHJ1bGUpe1xuXHRcdHZhciBmdW5jID0gZ2V0TkNoZWNrKHJ1bGUpO1xuXG5cdFx0aWYoZnVuYyA9PT0gZmFsc2VGdW5jKSByZXR1cm4gZnVuYztcblx0XHRpZihmdW5jID09PSB0cnVlRnVuYykgIHJldHVybiBnZXRDaGlsZEZ1bmMobmV4dCk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gbnRoQ2hpbGQoZWxlbSl7XG5cdFx0XHR2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtKTtcblxuXHRcdFx0Zm9yKHZhciBpID0gMCwgcG9zID0gMDsgaSA8IHNpYmxpbmdzLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0aWYoaXNUYWcoc2libGluZ3NbaV0pKXtcblx0XHRcdFx0XHRpZihzaWJsaW5nc1tpXSA9PT0gZWxlbSkgYnJlYWs7XG5cdFx0XHRcdFx0ZWxzZSBwb3MrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZnVuYyhwb3MpICYmIG5leHQoZWxlbSk7XG5cdFx0fTtcblx0fSxcblx0XCJudGgtbGFzdC1jaGlsZFwiOiBmdW5jdGlvbihuZXh0LCBydWxlKXtcblx0XHR2YXIgZnVuYyA9IGdldE5DaGVjayhydWxlKTtcblxuXHRcdGlmKGZ1bmMgPT09IGZhbHNlRnVuYykgcmV0dXJuIGZ1bmM7XG5cdFx0aWYoZnVuYyA9PT0gdHJ1ZUZ1bmMpICByZXR1cm4gZ2V0Q2hpbGRGdW5jKG5leHQpO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIG50aExhc3RDaGlsZChlbGVtKXtcblx0XHRcdHZhciBzaWJsaW5ncyA9IGdldFNpYmxpbmdzKGVsZW0pO1xuXG5cdFx0XHRmb3IodmFyIHBvcyA9IDAsIGkgPSBzaWJsaW5ncy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG5cdFx0XHRcdGlmKGlzVGFnKHNpYmxpbmdzW2ldKSl7XG5cdFx0XHRcdFx0aWYoc2libGluZ3NbaV0gPT09IGVsZW0pIGJyZWFrO1xuXHRcdFx0XHRcdGVsc2UgcG9zKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZ1bmMocG9zKSAmJiBuZXh0KGVsZW0pO1xuXHRcdH07XG5cdH0sXG5cdFwibnRoLW9mLXR5cGVcIjogZnVuY3Rpb24obmV4dCwgcnVsZSl7XG5cdFx0dmFyIGZ1bmMgPSBnZXROQ2hlY2socnVsZSk7XG5cblx0XHRpZihmdW5jID09PSBmYWxzZUZ1bmMpIHJldHVybiBmdW5jO1xuXHRcdGlmKGZ1bmMgPT09IHRydWVGdW5jKSAgcmV0dXJuIGdldENoaWxkRnVuYyhuZXh0KTtcblxuXHRcdHJldHVybiBmdW5jdGlvbiBudGhPZlR5cGUoZWxlbSl7XG5cdFx0XHR2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtKTtcblxuXHRcdFx0Zm9yKHZhciBwb3MgPSAwLCBpID0gMDsgaSA8IHNpYmxpbmdzLmxlbmd0aDsgaSsrKXtcblx0XHRcdFx0aWYoaXNUYWcoc2libGluZ3NbaV0pKXtcblx0XHRcdFx0XHRpZihzaWJsaW5nc1tpXSA9PT0gZWxlbSkgYnJlYWs7XG5cdFx0XHRcdFx0aWYoZ2V0TmFtZShzaWJsaW5nc1tpXSkgPT09IGdldE5hbWUoZWxlbSkpIHBvcysrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmdW5jKHBvcykgJiYgbmV4dChlbGVtKTtcblx0XHR9O1xuXHR9LFxuXHRcIm50aC1sYXN0LW9mLXR5cGVcIjogZnVuY3Rpb24obmV4dCwgcnVsZSl7XG5cdFx0dmFyIGZ1bmMgPSBnZXROQ2hlY2socnVsZSk7XG5cblx0XHRpZihmdW5jID09PSBmYWxzZUZ1bmMpIHJldHVybiBmdW5jO1xuXHRcdGlmKGZ1bmMgPT09IHRydWVGdW5jKSAgcmV0dXJuIGdldENoaWxkRnVuYyhuZXh0KTtcblxuXHRcdHJldHVybiBmdW5jdGlvbiBudGhMYXN0T2ZUeXBlKGVsZW0pe1xuXHRcdFx0dmFyIHNpYmxpbmdzID0gZ2V0U2libGluZ3MoZWxlbSk7XG5cblx0XHRcdGZvcih2YXIgcG9zID0gMCwgaSA9IHNpYmxpbmdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcblx0XHRcdFx0aWYoaXNUYWcoc2libGluZ3NbaV0pKXtcblx0XHRcdFx0XHRpZihzaWJsaW5nc1tpXSA9PT0gZWxlbSkgYnJlYWs7XG5cdFx0XHRcdFx0aWYoZ2V0TmFtZShzaWJsaW5nc1tpXSkgPT09IGdldE5hbWUoZWxlbSkpIHBvcysrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmdW5jKHBvcykgJiYgbmV4dChlbGVtKTtcblx0XHR9O1xuXHR9LFxuXG4gICAgLy9UT0RPIGRldGVybWluZSB0aGUgYWN0dWFsIHJvb3QgZWxlbWVudFxuICAgIHJvb3Q6IGZ1bmN0aW9uKG5leHQpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgICByZXR1cm4gIWdldFBhcmVudChlbGVtKSAmJiBuZXh0KGVsZW0pO1xuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBzY29wZTogZnVuY3Rpb24obmV4dCwgcnVsZSwgb3B0aW9ucywgY29udGV4dCl7XG4gICAgICAgIGlmKCFjb250ZXh0IHx8IGNvbnRleHQubGVuZ3RoID09PSAwKXtcbiAgICAgICAgICAgIC8vZXF1aXZhbGVudCB0byA6cm9vdFxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlcnMucm9vdChuZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNvbnRleHQubGVuZ3RoID09PSAxKXtcbiAgICAgICAgICAgIC8vTk9URTogY2FuJ3QgYmUgdW5wYWNrZWQsIGFzIDpoYXMgdXNlcyB0aGlzIGZvciBzaWRlLWVmZmVjdHNcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dFswXSA9PT0gZWxlbSAmJiBuZXh0KGVsZW0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmluZGV4T2YoZWxlbSkgPj0gMCAmJiBuZXh0KGVsZW0pO1xuICAgICAgICB9O1xuICAgIH0sXG5cblx0Ly9qUXVlcnkgZXh0ZW5zaW9ucyAob3RoZXJzIGZvbGxvdyBhcyBwc2V1ZG9zKVxuXHRjaGVja2JveDogZ2V0QXR0cmliRnVuYyhcInR5cGVcIiwgXCJjaGVja2JveFwiKSxcblx0ZmlsZTogZ2V0QXR0cmliRnVuYyhcInR5cGVcIiwgXCJmaWxlXCIpLFxuXHRwYXNzd29yZDogZ2V0QXR0cmliRnVuYyhcInR5cGVcIiwgXCJwYXNzd29yZFwiKSxcblx0cmFkaW86IGdldEF0dHJpYkZ1bmMoXCJ0eXBlXCIsIFwicmFkaW9cIiksXG5cdHJlc2V0OiBnZXRBdHRyaWJGdW5jKFwidHlwZVwiLCBcInJlc2V0XCIpLFxuXHRpbWFnZTogZ2V0QXR0cmliRnVuYyhcInR5cGVcIiwgXCJpbWFnZVwiKSxcblx0c3VibWl0OiBnZXRBdHRyaWJGdW5jKFwidHlwZVwiLCBcInN1Ym1pdFwiKVxufTtcblxuLy93aGlsZSBmaWx0ZXJzIGFyZSBwcmVjb21waWxlZCwgcHNldWRvcyBnZXQgY2FsbGVkIHdoZW4gdGhleSBhcmUgbmVlZGVkXG52YXIgcHNldWRvcyA9IHtcblx0ZW1wdHk6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHJldHVybiAhZ2V0Q2hpbGRyZW4oZWxlbSkuc29tZShmdW5jdGlvbihlbGVtKXtcblx0XHRcdHJldHVybiBpc1RhZyhlbGVtKSB8fCBlbGVtLnR5cGUgPT09IFwidGV4dFwiO1xuXHRcdH0pO1xuXHR9LFxuXG5cdFwiZmlyc3QtY2hpbGRcIjogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuIGdldEZpcnN0RWxlbWVudChnZXRTaWJsaW5ncyhlbGVtKSkgPT09IGVsZW07XG5cdH0sXG5cdFwibGFzdC1jaGlsZFwiOiBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtKTtcblxuXHRcdGZvcih2YXIgaSA9IHNpYmxpbmdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcblx0XHRcdGlmKHNpYmxpbmdzW2ldID09PSBlbGVtKSByZXR1cm4gdHJ1ZTtcblx0XHRcdGlmKGlzVGFnKHNpYmxpbmdzW2ldKSkgYnJlYWs7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXHRcImZpcnN0LW9mLXR5cGVcIjogZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIHNpYmxpbmdzID0gZ2V0U2libGluZ3MoZWxlbSk7XG5cblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2libGluZ3MubGVuZ3RoOyBpKyspe1xuXHRcdFx0aWYoaXNUYWcoc2libGluZ3NbaV0pKXtcblx0XHRcdFx0aWYoc2libGluZ3NbaV0gPT09IGVsZW0pIHJldHVybiB0cnVlO1xuXHRcdFx0XHRpZihnZXROYW1lKHNpYmxpbmdzW2ldKSA9PT0gZ2V0TmFtZShlbGVtKSkgYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXHRcImxhc3Qtb2YtdHlwZVwiOiBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtKTtcblxuXHRcdGZvcih2YXIgaSA9IHNpYmxpbmdzLmxlbmd0aC0xOyBpID49IDA7IGktLSl7XG5cdFx0XHRpZihpc1RhZyhzaWJsaW5nc1tpXSkpe1xuXHRcdFx0XHRpZihzaWJsaW5nc1tpXSA9PT0gZWxlbSkgcmV0dXJuIHRydWU7XG5cdFx0XHRcdGlmKGdldE5hbWUoc2libGluZ3NbaV0pID09PSBnZXROYW1lKGVsZW0pKSBicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdFwib25seS1vZi10eXBlXCI6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHZhciBzaWJsaW5ncyA9IGdldFNpYmxpbmdzKGVsZW0pO1xuXG5cdFx0Zm9yKHZhciBpID0gMCwgaiA9IHNpYmxpbmdzLmxlbmd0aDsgaSA8IGo7IGkrKyl7XG5cdFx0XHRpZihpc1RhZyhzaWJsaW5nc1tpXSkpe1xuXHRcdFx0XHRpZihzaWJsaW5nc1tpXSA9PT0gZWxlbSkgY29udGludWU7XG5cdFx0XHRcdGlmKGdldE5hbWUoc2libGluZ3NbaV0pID09PSBnZXROYW1lKGVsZW0pKSByZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cdFwib25seS1jaGlsZFwiOiBmdW5jdGlvbihlbGVtKXtcblx0XHR2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtKTtcblxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzaWJsaW5ncy5sZW5ndGg7IGkrKyl7XG5cdFx0XHRpZihpc1RhZyhzaWJsaW5nc1tpXSkgJiYgc2libGluZ3NbaV0gIT09IGVsZW0pIHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHQvLzptYXRjaGVzKGEsIGFyZWEsIGxpbmspW2hyZWZdXG5cdGxpbms6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHJldHVybiBoYXNBdHRyaWIoZWxlbSwgXCJocmVmXCIpO1xuXHR9LFxuXHR2aXNpdGVkOiBmYWxzZUZ1bmMsIC8vc2VlbXMgdG8gYmUgYSB2YWxpZCBpbXBsZW1lbnRhdGlvblxuXHQvL1RPRE86IDphbnktbGluayBvbmNlIHRoZSBuYW1lIGlzIGZpbmFsaXplZCAoYXMgYW4gYWxpYXMgb2YgOmxpbmspXG5cblx0Ly9mb3Jtc1xuXHQvL3RvIGNvbnNpZGVyOiA6dGFyZ2V0XG5cblx0Ly86bWF0Y2hlcyhbc2VsZWN0ZWRdLCBzZWxlY3Q6bm90KFttdWx0aXBsZV0pOm5vdCg+IG9wdGlvbltzZWxlY3RlZF0pID4gb3B0aW9uOmZpcnN0LW9mLXR5cGUpXG5cdHNlbGVjdGVkOiBmdW5jdGlvbihlbGVtKXtcblx0XHRpZihoYXNBdHRyaWIoZWxlbSwgXCJzZWxlY3RlZFwiKSkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSBpZihnZXROYW1lKGVsZW0pICE9PSBcIm9wdGlvblwiKSByZXR1cm4gZmFsc2U7XG5cblx0XHQvL3RoZSBmaXJzdCA8b3B0aW9uPiBpbiBhIDxzZWxlY3Q+IGlzIGFsc28gc2VsZWN0ZWRcblx0XHR2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGVsZW0pO1xuXG5cdFx0aWYoXG5cdFx0XHQhcGFyZW50IHx8XG5cdFx0XHRnZXROYW1lKHBhcmVudCkgIT09IFwic2VsZWN0XCIgfHxcblx0XHRcdGhhc0F0dHJpYihwYXJlbnQsIFwibXVsdGlwbGVcIilcblx0XHQpIHJldHVybiBmYWxzZTtcblxuXHRcdHZhciBzaWJsaW5ncyA9IGdldENoaWxkcmVuKHBhcmVudCksXG5cdFx0XHRzYXdFbGVtICA9IGZhbHNlO1xuXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNpYmxpbmdzLmxlbmd0aDsgaSsrKXtcblx0XHRcdGlmKGlzVGFnKHNpYmxpbmdzW2ldKSl7XG5cdFx0XHRcdGlmKHNpYmxpbmdzW2ldID09PSBlbGVtKXtcblx0XHRcdFx0XHRzYXdFbGVtID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIGlmKCFzYXdFbGVtKXtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0gZWxzZSBpZihoYXNBdHRyaWIoc2libGluZ3NbaV0sIFwic2VsZWN0ZWRcIikpe1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzYXdFbGVtO1xuXHR9LFxuXHQvL2h0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NjcmlwdGluZy5odG1sI2Rpc2FibGVkLWVsZW1lbnRzXG5cdC8vOm1hdGNoZXMoXG5cdC8vICA6bWF0Y2hlcyhidXR0b24sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBtZW51aXRlbSwgb3B0Z3JvdXAsIG9wdGlvbilbZGlzYWJsZWRdLFxuXHQvLyAgb3B0Z3JvdXBbZGlzYWJsZWRdID4gb3B0aW9uKSxcblx0Ly8gZmllbGRzZXRbZGlzYWJsZWRdICogLy9UT0RPIG5vdCBjaGlsZCBvZiBmaXJzdCA8bGVnZW5kPlxuXHQvLylcblx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHJldHVybiBoYXNBdHRyaWIoZWxlbSwgXCJkaXNhYmxlZFwiKTtcblx0fSxcblx0ZW5hYmxlZDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuICFoYXNBdHRyaWIoZWxlbSwgXCJkaXNhYmxlZFwiKTtcblx0fSxcblx0Ly86bWF0Y2hlcyg6bWF0Y2hlcyg6cmFkaW8sIDpjaGVja2JveClbY2hlY2tlZF0sIDpzZWxlY3RlZCkgKFRPRE8gbWVudWl0ZW0pXG5cdGNoZWNrZWQ6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHJldHVybiBoYXNBdHRyaWIoZWxlbSwgXCJjaGVja2VkXCIpIHx8IHBzZXVkb3Muc2VsZWN0ZWQoZWxlbSk7XG5cdH0sXG5cdC8vOm1hdGNoZXMoaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEpW3JlcXVpcmVkXVxuXHRyZXF1aXJlZDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuIGhhc0F0dHJpYihlbGVtLCBcInJlcXVpcmVkXCIpO1xuXHR9LFxuXHQvLzptYXRjaGVzKGlucHV0LCBzZWxlY3QsIHRleHRhcmVhKTpub3QoW3JlcXVpcmVkXSlcblx0b3B0aW9uYWw6IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHJldHVybiAhaGFzQXR0cmliKGVsZW0sIFwicmVxdWlyZWRcIik7XG5cdH0sXG5cblx0Ly9qUXVlcnkgZXh0ZW5zaW9uc1xuXG5cdC8vOm5vdCg6ZW1wdHkpXG5cdHBhcmVudDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0cmV0dXJuICFwc2V1ZG9zLmVtcHR5KGVsZW0pO1xuXHR9LFxuXHQvLzptYXRjaGVzKGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYpXG5cdGhlYWRlcjogZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIG5hbWUgPSBnZXROYW1lKGVsZW0pO1xuXHRcdHJldHVybiBuYW1lID09PSBcImgxXCIgfHxcblx0XHQgICAgICAgbmFtZSA9PT0gXCJoMlwiIHx8XG5cdFx0ICAgICAgIG5hbWUgPT09IFwiaDNcIiB8fFxuXHRcdCAgICAgICBuYW1lID09PSBcImg0XCIgfHxcblx0XHQgICAgICAgbmFtZSA9PT0gXCJoNVwiIHx8XG5cdFx0ICAgICAgIG5hbWUgPT09IFwiaDZcIjtcblx0fSxcblxuXHQvLzptYXRjaGVzKGJ1dHRvbiwgaW5wdXRbdHlwZT1idXR0b25dKVxuXHRidXR0b246IGZ1bmN0aW9uKGVsZW0pe1xuXHRcdHZhciBuYW1lID0gZ2V0TmFtZShlbGVtKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJidXR0b25cIiB8fFxuXHRcdCAgICAgICBuYW1lID09PSBcImlucHV0XCIgJiZcblx0XHQgICAgICAgZ2V0QXR0cmlidXRlKGVsZW0sIFwidHlwZVwiKSA9PT0gXCJidXR0b25cIjtcblx0fSxcblx0Ly86bWF0Y2hlcyhpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgYnV0dG9uKVxuXHRpbnB1dDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIG5hbWUgPSBnZXROYW1lKGVsZW0pO1xuXHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgfHxcblx0XHQgICAgICAgbmFtZSA9PT0gXCJ0ZXh0YXJlYVwiIHx8XG5cdFx0ICAgICAgIG5hbWUgPT09IFwic2VsZWN0XCIgfHxcblx0XHQgICAgICAgbmFtZSA9PT0gXCJidXR0b25cIjtcblx0fSxcblx0Ly9pbnB1dDptYXRjaGVzKDpub3QoW3R5cGUhPScnXSksIFt0eXBlPSd0ZXh0JyBpXSlcblx0dGV4dDogZnVuY3Rpb24oZWxlbSl7XG5cdFx0dmFyIGF0dHI7XG5cdFx0cmV0dXJuIGdldE5hbWUoZWxlbSkgPT09IFwiaW5wdXRcIiAmJiAoXG5cdFx0XHQhKGF0dHIgPSBnZXRBdHRyaWJ1dGUoZWxlbSwgXCJ0eXBlXCIpKSB8fFxuXHRcdFx0YXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIlxuXHRcdCk7XG5cdH1cbn07XG5cbmZ1bmN0aW9uIHZlcmlmeUFyZ3MoZnVuYywgbmFtZSwgc3Vic2VsZWN0KXtcblx0aWYoc3Vic2VsZWN0ID09PSBudWxsKXtcblx0XHRpZihmdW5jLmxlbmd0aCA+IDEgJiYgbmFtZSAhPT0gXCJzY29wZVwiKXtcblx0XHRcdHRocm93IG5ldyBTeW50YXhFcnJvcihcInBzZXVkby1zZWxlY3RvciA6XCIgKyBuYW1lICsgXCIgcmVxdWlyZXMgYW4gYXJndW1lbnRcIik7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGlmKGZ1bmMubGVuZ3RoID09PSAxKXtcblx0XHRcdHRocm93IG5ldyBTeW50YXhFcnJvcihcInBzZXVkby1zZWxlY3RvciA6XCIgKyBuYW1lICsgXCIgZG9lc24ndCBoYXZlIGFueSBhcmd1bWVudHNcIik7XG5cdFx0fVxuXHR9XG59XG5cbi8vRklYTUUgdGhpcyBmZWVscyBoYWNreVxudmFyIHJlX0NTUzMgPSAvXig/Oig/Om50aHxsYXN0fGZpcnN0fG9ubHkpLSg/OmNoaWxkfG9mLXR5cGUpfHJvb3R8ZW1wdHl8KD86ZW58ZGlzKWFibGVkfGNoZWNrZWR8bm90KSQvO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0Y29tcGlsZTogZnVuY3Rpb24obmV4dCwgZGF0YSwgb3B0aW9ucywgY29udGV4dCl7XG5cdFx0dmFyIG5hbWUgPSBkYXRhLm5hbWUsXG5cdFx0XHRzdWJzZWxlY3QgPSBkYXRhLmRhdGE7XG5cblx0XHRpZihvcHRpb25zICYmIG9wdGlvbnMuc3RyaWN0ICYmICFyZV9DU1MzLnRlc3QobmFtZSkpe1xuXHRcdFx0dGhyb3cgU3ludGF4RXJyb3IoXCI6XCIgKyBuYW1lICsgXCIgaXNuJ3QgcGFydCBvZiBDU1MzXCIpO1xuXHRcdH1cblxuXHRcdGlmKHR5cGVvZiBmaWx0ZXJzW25hbWVdID09PSBcImZ1bmN0aW9uXCIpe1xuXHRcdFx0dmVyaWZ5QXJncyhmaWx0ZXJzW25hbWVdLCBuYW1lLCAgc3Vic2VsZWN0KTtcblx0XHRcdHJldHVybiBmaWx0ZXJzW25hbWVdKG5leHQsIHN1YnNlbGVjdCwgb3B0aW9ucywgY29udGV4dCk7XG5cdFx0fSBlbHNlIGlmKHR5cGVvZiBwc2V1ZG9zW25hbWVdID09PSBcImZ1bmN0aW9uXCIpe1xuXHRcdFx0dmFyIGZ1bmMgPSBwc2V1ZG9zW25hbWVdO1xuXHRcdFx0dmVyaWZ5QXJncyhmdW5jLCBuYW1lLCBzdWJzZWxlY3QpO1xuXG5cdFx0XHRpZihuZXh0ID09PSB0cnVlRnVuYykgcmV0dXJuIGZ1bmM7XG5cblx0XHRcdHJldHVybiBmdW5jdGlvbiBwc2V1ZG9BcmdzKGVsZW0pe1xuXHRcdFx0XHRyZXR1cm4gZnVuYyhlbGVtLCBzdWJzZWxlY3QpICYmIG5leHQoZWxlbSk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJ1bm1hdGNoZWQgcHNldWRvLWNsYXNzIDpcIiArIG5hbWUpO1xuXHRcdH1cblx0fSxcblx0ZmlsdGVyczogZmlsdGVycyxcblx0cHNldWRvczogcHNldWRvc1xufTtcbiJdfQ==