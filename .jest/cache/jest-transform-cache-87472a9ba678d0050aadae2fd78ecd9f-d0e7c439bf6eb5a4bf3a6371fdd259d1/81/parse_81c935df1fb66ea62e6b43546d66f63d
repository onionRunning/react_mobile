3aeb8628fee5f3d10dd5d81b19201488
module.exports = parse; //following http://www.w3.org/TR/css3-selectors/#nth-child-pseudo
//[ ['-'|'+']? INTEGER? {N} [ S* ['-'|'+'] S* INTEGER ]?

var re_nthElement = /^([+\-]?\d*n)?\s*(?:([+\-]?)\s*(\d+))?$/;
/*
	parses a nth-check formula, returns an array of two numbers
*/

function parse(formula) {
  formula = formula.trim().toLowerCase();

  if (formula === "even") {
    return [2, 0];
  } else if (formula === "odd") {
    return [2, 1];
  } else {
    var parsed = formula.match(re_nthElement);

    if (!parsed) {
      throw new SyntaxError("n-th rule couldn't be parsed ('" + formula + "')");
    }

    var a;

    if (parsed[1]) {
      a = parseInt(parsed[1], 10);

      if (isNaN(a)) {
        if (parsed[1].charAt(0) === "-") a = -1;else a = 1;
      }
    } else a = 0;

    return [a, parsed[3] ? parseInt((parsed[2] || "") + parsed[3], 10) : 0];
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJwYXJzZSIsInJlX250aEVsZW1lbnQiLCJmb3JtdWxhIiwidHJpbSIsInRvTG93ZXJDYXNlIiwicGFyc2VkIiwibWF0Y2giLCJTeW50YXhFcnJvciIsImEiLCJwYXJzZUludCIsImlzTmFOIiwiY2hhckF0Il0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCQyxLQUFqQixDLENBRUE7QUFFQTs7QUFDQSxJQUFJQyxhQUFhLEdBQUcseUNBQXBCO0FBRUE7Ozs7QUFHQSxTQUFTRCxLQUFULENBQWVFLE9BQWYsRUFBdUI7QUFDdEJBLEVBQUFBLE9BQU8sR0FBR0EsT0FBTyxDQUFDQyxJQUFSLEdBQWVDLFdBQWYsRUFBVjs7QUFFQSxNQUFHRixPQUFPLEtBQUssTUFBZixFQUFzQjtBQUNyQixXQUFPLENBQUMsQ0FBRCxFQUFJLENBQUosQ0FBUDtBQUNBLEdBRkQsTUFFTyxJQUFHQSxPQUFPLEtBQUssS0FBZixFQUFxQjtBQUMzQixXQUFPLENBQUMsQ0FBRCxFQUFJLENBQUosQ0FBUDtBQUNBLEdBRk0sTUFFQTtBQUNOLFFBQUlHLE1BQU0sR0FBR0gsT0FBTyxDQUFDSSxLQUFSLENBQWNMLGFBQWQsQ0FBYjs7QUFFQSxRQUFHLENBQUNJLE1BQUosRUFBVztBQUNWLFlBQU0sSUFBSUUsV0FBSixDQUFnQixvQ0FBb0NMLE9BQXBDLEdBQThDLElBQTlELENBQU47QUFDQTs7QUFFRCxRQUFJTSxDQUFKOztBQUVBLFFBQUdILE1BQU0sQ0FBQyxDQUFELENBQVQsRUFBYTtBQUNaRyxNQUFBQSxDQUFDLEdBQUdDLFFBQVEsQ0FBQ0osTUFBTSxDQUFDLENBQUQsQ0FBUCxFQUFZLEVBQVosQ0FBWjs7QUFDQSxVQUFHSyxLQUFLLENBQUNGLENBQUQsQ0FBUixFQUFZO0FBQ1gsWUFBR0gsTUFBTSxDQUFDLENBQUQsQ0FBTixDQUFVTSxNQUFWLENBQWlCLENBQWpCLE1BQXdCLEdBQTNCLEVBQWdDSCxDQUFDLEdBQUcsQ0FBQyxDQUFMLENBQWhDLEtBQ0tBLENBQUMsR0FBRyxDQUFKO0FBQ0w7QUFDRCxLQU5ELE1BTU9BLENBQUMsR0FBRyxDQUFKOztBQUVQLFdBQU8sQ0FDTkEsQ0FETSxFQUVOSCxNQUFNLENBQUMsQ0FBRCxDQUFOLEdBQVlJLFFBQVEsQ0FBQyxDQUFDSixNQUFNLENBQUMsQ0FBRCxDQUFOLElBQWEsRUFBZCxJQUFvQkEsTUFBTSxDQUFDLENBQUQsQ0FBM0IsRUFBZ0MsRUFBaEMsQ0FBcEIsR0FBMEQsQ0FGcEQsQ0FBUDtBQUlBO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHBhcnNlO1xuXG4vL2ZvbGxvd2luZyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jbnRoLWNoaWxkLXBzZXVkb1xuXG4vL1sgWyctJ3wnKyddPyBJTlRFR0VSPyB7Tn0gWyBTKiBbJy0nfCcrJ10gUyogSU5URUdFUiBdP1xudmFyIHJlX250aEVsZW1lbnQgPSAvXihbK1xcLV0/XFxkKm4pP1xccyooPzooWytcXC1dPylcXHMqKFxcZCspKT8kLztcblxuLypcblx0cGFyc2VzIGEgbnRoLWNoZWNrIGZvcm11bGEsIHJldHVybnMgYW4gYXJyYXkgb2YgdHdvIG51bWJlcnNcbiovXG5mdW5jdGlvbiBwYXJzZShmb3JtdWxhKXtcblx0Zm9ybXVsYSA9IGZvcm11bGEudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cblx0aWYoZm9ybXVsYSA9PT0gXCJldmVuXCIpe1xuXHRcdHJldHVybiBbMiwgMF07XG5cdH0gZWxzZSBpZihmb3JtdWxhID09PSBcIm9kZFwiKXtcblx0XHRyZXR1cm4gWzIsIDFdO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBwYXJzZWQgPSBmb3JtdWxhLm1hdGNoKHJlX250aEVsZW1lbnQpO1xuXG5cdFx0aWYoIXBhcnNlZCl7XG5cdFx0XHR0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJuLXRoIHJ1bGUgY291bGRuJ3QgYmUgcGFyc2VkICgnXCIgKyBmb3JtdWxhICsgXCInKVwiKTtcblx0XHR9XG5cblx0XHR2YXIgYTtcblxuXHRcdGlmKHBhcnNlZFsxXSl7XG5cdFx0XHRhID0gcGFyc2VJbnQocGFyc2VkWzFdLCAxMCk7XG5cdFx0XHRpZihpc05hTihhKSl7XG5cdFx0XHRcdGlmKHBhcnNlZFsxXS5jaGFyQXQoMCkgPT09IFwiLVwiKSBhID0gLTE7XG5cdFx0XHRcdGVsc2UgYSA9IDE7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGEgPSAwO1xuXG5cdFx0cmV0dXJuIFtcblx0XHRcdGEsXG5cdFx0XHRwYXJzZWRbM10gPyBwYXJzZUludCgocGFyc2VkWzJdIHx8IFwiXCIpICsgcGFyc2VkWzNdLCAxMCkgOiAwXG5cdFx0XTtcblx0fVxufVxuIl19